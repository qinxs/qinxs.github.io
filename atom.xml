<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>枋柚梓的猫会发光</title>
  <icon>https://www.gravatar.com/avatar/3ce1e6c77b4910f1871106cb30dc62b0</icon>
  <subtitle>猫和它的小小窝</subtitle>
  <link href="https://inkss.cn/atom.xml" rel="self"/>
  
  <link href="https://inkss.cn/"/>
  <updated>2020-09-06T12:10:00.000Z</updated>
  <id>https://inkss.cn/</id>
  
  <author>
    <name>枋柚梓</name>
    <email>me@szyink.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ES6 快速入坑</title>
    <link href="https://inkss.cn/blog/ff35080b/"/>
    <id>https://inkss.cn/blog/ff35080b/</id>
    <published>2020-09-06T12:10:00.000Z</published>
    <updated>2020-09-06T12:10:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Const 与 Var 的区别</strong></p><ul><li><p>只允许声明事赋值</p></li><li><p>先定义后使用</p></li><li><p>不允许重复声明</p></li><li><p>不支持变量提升</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(b);  <span class="comment">//Uncaught ReferenceError: b is not defined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>; </span><br></pre></td></tr></table></figure><p>而 let / const 会在第一行报 <code>Cannot access 'a' before initialization</code> ，即需要先定义后使用。</p></li><li><p>解决了全局变量污染（不属于顶层对象 window）</p></li><li><p>暂时性死区 （区块中的 let/const 所声明变量，形成封闭作用域，覆盖作用域之外的同名变量，也就是需要遵循先定义后使用原则）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> URL = <span class="string">&#x27;https://xxx.com&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    URL = <span class="string">&#x27;xxx&#x27;</span>; <span class="comment">// 此处报错</span></span><br><span class="line">    <span class="keyword">const</span> xxx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时报：<code>Uncaught SyntaxError: Missing initializer in const declaration</code></p></li><li><p>块级作用域特性</p></li></ul><p><strong>Const 变量的可变性</strong></p><p><figure class='image-wrapper'><img fancybox src="../../static/ES6%E5%AD%A6%E4%B9%A0.assets/image-20200906164049377.png" class="lazyload" data-srcset="../../static/ES6%E5%AD%A6%E4%B9%A0.assets/image-20200906164049377.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Const 变量的可变性">  <figcaption>Const 变量的可变性</figcaption></figure></p><ul><li><p>const 定义的引用类型变量，其内容可以更改，可以利用 freeze 冻结保证内容不被改变。</p></li><li><p>Object.freeze(obj) : 只能冻结一层，例如 const 定义对象中的某个属性为数组，数组中内容依旧可改。</p></li><li><p>自定义方法遍历实现深层次冻结。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myFreeze</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">Object</span>.freeze(obj);</span><br><span class="line">    <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> obj[key] === <span class="string">&#x27;object&#x27;</span>)</span><br><span class="line">            myFreeze(obj[key]);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="箭头函数">箭头函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum1 = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = sum(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//bala</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>箭头函数的 this ：它会捕获其所在上下文的 this 值， 作为自己的 this 值。</li><li>参考链接：<a href="https://www.cnblogs.com/dongcanliang/p/7054176.html">This 指向详细解析（箭头函数）</a></li></ul><p><strong>箭头函数需要注意的场景</strong></p><ul><li>箭头函数作为事件回调函数时。</li><li>对象中方法的箭头函数时（建议不用）。</li><li>构造函数中的箭头函数。</li><li>箭头函数中 arguments 失效。</li><li>函数原型下的方法。</li></ul><h2 id="解构赋值">解构赋值</h2><ul><li>等号左右两边完全匹配</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = &#123;</span><br><span class="line">    name: <span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line">    age: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;name, age&#125; = people;</span><br><span class="line"><span class="built_in">console</span>.log(name, age)  <span class="comment">// xxx 18</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = &#123;</span><br><span class="line">    name: <span class="string">&#x27;xiaoming&#x27;</span>,</span><br><span class="line">    age: <span class="number">18</span>,</span><br><span class="line">    mother: &#123;</span><br><span class="line">        name: <span class="string">&#x27;xiaohong&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">    name,</span><br><span class="line">    age,</span><br><span class="line">    mother: &#123;</span><br><span class="line">        name: motherName  <span class="comment">// 别名</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; = people;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name, age, motherName) <span class="comment">// xiaoming 18 xiaohong</span></span><br></pre></td></tr></table></figure><ul><li>如何正确的使用解构赋值</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="function">(<span class="params">[a, b, c]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a + b + c);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">sum([<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = <span class="function">(<span class="params">&#123;name, age, sex = <span class="string">&#x27;boy&#x27;</span>&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name, age, sex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(&#123;</span><br><span class="line">    name: <span class="string">&#x27;xiaohong&#x27;</span>,</span><br><span class="line">    age: <span class="string">&#x27;18&#x27;</span>,</span><br><span class="line">    sex: <span class="string">&#x27;girl&#x27;</span></span><br><span class="line">&#125;);  <span class="comment">// xiaohong 18 girl</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> b = <span class="number">2</span>;</span><br><span class="line">[b, a] = [a, b];</span><br><span class="line"><span class="built_in">console</span>.log(a, b);  <span class="comment">// 2 1</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> json = <span class="string">&#x27;&#123;&quot;name&quot;: &quot;xiaoming&quot;, &quot;age&quot;: 18&#125;&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123;name, age&#125; = <span class="built_in">JSON</span>.parse(json);</span><br><span class="line"><span class="built_in">console</span>.log(name, age); <span class="comment">// xiaoming 18</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;./data.json&#x27;</span>).then(<span class="function">(<span class="params">&#123;data: &#123;name, age&#125;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(name, age)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">ES6 快速入门，从三个角度展开：Const, 箭头函数, 解构赋值。</summary>
    
    
    
    <category term="前端" scheme="https://inkss.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="ES6" scheme="https://inkss.cn/tags/ES6/"/>
    
    <category term="Const" scheme="https://inkss.cn/tags/Const/"/>
    
    <category term="Arrow Function" scheme="https://inkss.cn/tags/Arrow-Function/"/>
    
    <category term="Desctructuring" scheme="https://inkss.cn/tags/Desctructuring/"/>
    
  </entry>
  
  <entry>
    <title>AdGuard | 保护隐私 | 拦截广告 | DOH 支持</title>
    <link href="https://inkss.cn/blog/c949262/"/>
    <id>https://inkss.cn/blog/c949262/</id>
    <published>2020-08-23T17:36:15.000Z</published>
    <updated>2020-08-24T12:01:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>  这是一篇水文。</p><h2 id="隐私保护">隐私保护</h2><p>  在 AdGuard 的设置模块中有一个名为隐形模式的选择项，这里定义是 <strong>从成千上万的互联网跟踪器中保护您的身份和个人敏感信息不被泄露</strong> 。早期在浏览器的请求中，有一个名为 <em>请勿跟踪（DNT）</em> 的设置，设计本身到是好意，但他更像是个君子协议（总有小人），还是不完全靠谱的。</p><h3 id="跟踪方式">跟踪方式</h3><p>  主要是对于 cookie 的处理，一般来说网站会利用 cookie 存储一些信息以标记用户，AdGuard 可以修改所有 cookie 的过期时间，对于第三方 cookie ，大可以直接销毁掉，同类型的还有第三方的请求头或授权头，统统勾选拦截即可。另外第一方 cookie 一般会涉及用户自动登录，到可以不去拦截，这类内容的过滤主要是过滤身份标记，特征值等等。</p><h3 id="浏览器-API-与-Windows-跟踪">浏览器 API 与 Windows 跟踪</h3><p>  WebRTC 通信协议，即使是开启了代理也有暴漏真实 IP 地址的风险，一般来说也不会用浏览器在线聊天，建议关闭。除此之外还有推送 API 和定位 API ，这种相当小众的需求还是拦截微妙。Flash ，一般来说这类严重过时的产物就应该直接关闭，最起码已经不被官方所支持了。 Windows 跟踪 中则是遥测、广告 ID，自动提交可疑病毒样本和 WAP 消息路由，无脑全勾选才是最佳选择呀。</p><h3 id="杂项">杂项</h3><p>  前面所述都是拦截，而这部分则是伪装，包括自定义 Referrer 、自定义 User-Agent 和自定义 IP 地址。AdGuard 可以拦截替换请求头中的相关信息达到欺负服务器的目的（一些笨笨的检测方法会被欺骗到），提供一些假数据，隐藏真实信息。</p><h2 id="DOH-与-DOT">DOH 与 DOT</h2><p>  好吧，实话说前半段皆是介绍 Adguard，这里进入正文：DNS 协议的加密。PC 版 AdGuard 在最近的更新中正式支持自定义 DNS ，其中便包括自定义 DOH 和 DOT ，这弥补了 Windows 系统无法设置 SNDS 的遗憾。</p><h3 id="SDNS">SDNS</h3><p>  就像是 Http 到 Https 的演变过程一样，DNS 的隐私安全也被提上了议程。我在学习计算机网络时就一直感叹那些网络协议设计只巧妙（向下兼容）。DNS 的加密过程也是非常巧妙的，目前来说有两种方式，一为走 tls 协议，另一位混进 https 协议里。</p><p>  SNDS 多加了一层鉴权使得通信过程得以保证。但是 DOT 的口碑不佳，因为 DOT 独占 853 端口，虽然无法被投毒，但是端口特征过于明显。DOH 则不同啦，和 Https 共用 443 端口，流量混淆起来，特征不明显更为安全。和 Http 劫持一样，不加密的 DNS 也有被劫持投毒的风险，一些恶意的运营商甚至可以通过此手段悄然无声的在网站中加载广告。</p><ul><li><code>https://dns.alidns.com/dns-query</code></li><li><code>https://doh.pub/dns-query</code></li><li><code>https://dns.google/dns-query</code></li></ul><p>  以上三个，分别是阿里、腾讯、谷歌的 DOH 地址。加密是有代价的，但消耗却微不足道，所以势在必行！</p><h3 id="DNS-隐私">DNS 隐私</h3><p>  这是一段 DNS over HTTPS 的简单介绍：</p><blockquote><p>  类似于 DNS over TLS 等机制， DNS over HTTPS 协议试图解决同样的安全和隐私问题。该机制并不考虑在原始 TLS 中包装 DNS 查询，而是包装在 HTTPS 中。而 HTTPS 协议本身是运行于TLS之上的。</p></blockquote><blockquote><p>  该机制的合理性在于，用户无需防护未知中间者，只需防护恶意的网络管理员。如果网络管理员可以选择网络中通信的DNS服务器，那么用户就会在毫不知情的情况下被路由到某个恶意服务器。实话讲，根本无法相信咖啡店的 Wi-Fi 会有什么安全的 DNS 服务器。如果要加密的服务器并不符合你的利益，那么加密本身也起不了什么作用。</p></blockquote><blockquote><p>  网络运营商可以强制人们始终使用他们所选择的服务器发出 DNS 请求，方法是针对其它服务器的请求实施中间人攻击（MITM），并自己回复它们，或者仅阻止 DNS 端口上与其他服务器之间的通信即可。DNS over TLS 可避免前者，并且由于 DNS over TLS 具有自己的服务端口，因此可以识别并阻止 DNS over TLS 流量。DNS over HTTPS 通过将 DNS 流量与所有其他 HTTPS 的流量混合在一起，完全避免产生上述问题。通常，管理者是无法禁止流向某个服务器的所有 HTTPS 流量。</p></blockquote><blockquote><p>  DNS over TLS 和 DNS over HTTPS 之间的差异在于，某些人认为他们有权限制其所提供公用事业服务的用户，而一些用户则想直接让这些管控者“滚得远远的”。</p></blockquote><h2 id="Adguard-Home">Adguard Home</h2><p>  Adguard Home 可以说是一套自建 DNS 系统，除了它本身就有的精准屏蔽广告域名外，我们还可以利用它搭建一个属于自己的 SNDS。由于国内的政策对自建 DNS 方面允不允许不好说，流量特征明显的 DNS 和 DOT 显然是不行，万一被喝茶了可咋整，所以这里再次支持 DOH 啦，如同上文：通常，管理者是无法禁止流向某个服务器的所有 HTTPS 流量。</p><p>  Https 默认端口为 443 端口，包括但不限于~ 部署一张 SSL 证书到服务器上，封死 53,853 。同时选择合适的上游 DNS ，最好用使用服务器终端 Ping 一番上游地址，否则，若是DNS 解析时间过长，直接影响浏览速度。</p>]]></content>
    
    
    <summary type="html">从 Http 到 Https ，从 DNS 到 SDNS ，人们在追究安全的脚步上从未停歇。</summary>
    
    
    
    <category term="随笔" scheme="https://inkss.cn/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="隐私" scheme="https://inkss.cn/tags/%E9%9A%90%E7%A7%81/"/>
    
    <category term="Adguard" scheme="https://inkss.cn/tags/Adguard/"/>
    
    <category term="DNS" scheme="https://inkss.cn/tags/DNS/"/>
    
    <category term="DOH" scheme="https://inkss.cn/tags/DOH/"/>
    
  </entry>
  
  <entry>
    <title>Don't Starve Together</title>
    <link href="https://inkss.cn/blog/8fafff0e/"/>
    <id>https://inkss.cn/blog/8fafff0e/</id>
    <published>2020-07-17T13:58:00.000Z</published>
    <updated>2020-07-18T16:45:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="note alien-monster cyan"><p>预告：饥荒联机版即将上线啦，欢迎各位围观，吼吼吼~</p></div><div class="note bell red"><p>本文章分为两部分，一部分备份记录 DST 的搭建，另一部分记录游戏订阅信息~</p></div><div class="note poo gray"><p>服务器订阅至 2022/11 月，可放心食用且性能尚可，不用像当初那样抠抠搜搜的使用啦~</p></div><h2 id="一、饥荒联机版搭建">一、饥荒联机版搭建</h2><p>  大致的流程是这样的：</p><p><img fancybox src="https://img.inkss.cn/inkss/static/DSTGame.assets/image-20200718154336813.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/DSTGame.assets/image-20200718154336813.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><div class="tabs" id="steam"><ul class="nav-tabs not-select"><li class="tab active"><a href="#steam-1">1.安装 SteamCMD</a></li><li class="tab"><a href="#steam-2">2.安装饥荒服务端</a></li><li class="tab"><a href="#steam-3">3.解决依赖</a></li><li class="tab"><a href="#steam-4">4.上传配置文件</a></li><li class="tab"><a href="#steam-5">5.定制启动脚本</a></li></ul><div class="tab-content"><div class="tab-pane active" id="steam-1"><ul><li><strong>新建目录 steamcmd</strong></li></ul><p>此目录用于 steam 程序的安装目录。</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mkdir ~/steamcmd</span><br></pre></td></tr></table></figure><ul><li><strong>下载 SteamCMD 安装文件</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">wget -P ~/steamcmd https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz</span><br></pre></td></tr></table></figure><ul><li><strong>解压压缩包</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/steamcmd</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">tar -xvzf ~/steamcmd/steamcmd_linux.tar.gz</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="steam-2"><ul><li><strong>启动 steamcmd</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">./steamcmd.sh</span><br></pre></td></tr></table></figure><ul><li><strong>使用公共账户登录 Steam</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">login anonymous</span><br></pre></td></tr></table></figure><ul><li><strong>指定游戏文件的安装目录</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">force_install_dir ../dstserver</span><br></pre></td></tr></table></figure><ul><li><strong>安装饥荒服务端</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">app_update 343050 validate</span><br></pre></td></tr></table></figure><ul><li><strong>退出 Steam 客户端</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">quit</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="steam-3"><ul><li><strong>CentoS 依赖安装</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo yum install libcurl.i686</span><br></pre></td></tr></table></figure><ul><li><strong>跳转到 DST /bin 目录</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/dstserver/bin/lib32</span><br></pre></td></tr></table></figure><ul><li><strong>链接组件</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ln -s /usr/lib/libcurl.so.4 libcurl-gnutls.so.4</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="steam-4"><ul><li><strong>上传 MOD 订阅文件</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/dstserver/mods</span><br></pre></td></tr></table></figure><figure class="highlight lua"><figcaption><span>覆盖 dedicated_server_mods_setup.lua 文件</span></figcaption><table><tr><td class="code"><pre><span class="line">ServerModSetup(<span class="string">&quot;362175979&quot;</span>) <span class="comment">-- Wormhole Marks        标记相联通的虫洞</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;378160973&quot;</span>) <span class="comment">-- Global Positions      小地图显示玩家位置 共享地图发现</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;385006082&quot;</span>) <span class="comment">-- DST Path Lights       路径灯在黄昏时开启，在黎明时关闭</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;396822875&quot;</span>) <span class="comment">-- Spike Trap            增加两个陷阱 </span></span><br><span class="line">ServerModSetup(<span class="string">&quot;444235588&quot;</span>) <span class="comment">-- Deluxe Campfires      豪华营火 增加燃烧时间</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;458940297&quot;</span>) <span class="comment">-- FFood Values          显示食物价值</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;462434129&quot;</span>) <span class="comment">-- Restart               #重生 #复活 #自杀 Y:公聊 U:私聊</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;623286817&quot;</span>) <span class="comment">-- Free transplant       移植无需施肥</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;661253977&quot;</span>) <span class="comment">-- Don&#x27;t Drop Everything 死亡不掉落</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;663554209&quot;</span>) <span class="comment">-- Magic Freezer         更大个的冰箱 无损</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;666155465&quot;</span>) <span class="comment">-- Show Me               鼠标显示更多信息</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;659459255&quot;</span>) <span class="comment">-- Mandrake Tree         生成萤火虫</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;714712361&quot;</span>) <span class="comment">-- Starting NovicePacks  小橘子的新手礼包</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;785295023&quot;</span>) <span class="comment">-- Super Wall DST        超级墙DST 无敌的超级墙、自动门、栅栏和栅栏门</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;786556008&quot;</span>) <span class="comment">-- 45 Inventory Slots    45个格子</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;1216718131&quot;</span>) <span class="comment">-- 防卡两招              防卡两招</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;1301033176&quot;</span>) <span class="comment">-- Chinese Language     中文语言包 汉化了人物台词</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;1463539363&quot;</span>) <span class="comment">-- Automatic Gardener   自动园丁</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;1510231311&quot;</span>) <span class="comment">-- 人物 Ringo</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;1548459642&quot;</span>) <span class="comment">-- 人物 Hachi</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;1592689346&quot;</span>) <span class="comment">-- 人物 花花</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;1418746242&quot;</span>) <span class="comment">-- 汉化增强 Chinese++ (含中文高清字体)</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;572538624&quot;</span>) <span class="comment">--  Chinese Plus 中文汉化增强</span></span><br><span class="line">ServerModSetup(<span class="string">&quot;367546858&quot;</span>) <span class="comment">--  Chinese Language Pack 中文语言包</span></span><br></pre></td></tr></table></figure><ul><li><strong>上传存档配置文件</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mkdir -p ~/.klei/DoNotStarveTogether</span><br></pre></td></tr></table></figure><ul><li>上传存档文件至本目录，从本地饥荒客户端拿出的文件其实还是需要配置补充一番的。</li><li>配置补全环境可参考: <a href="/article/game/77face98.html#%E4%BA%94%E3%80%81%E9%85%8D%E7%BD%AE%E9%A5%A5%E8%8D%92%E6%9C%8D%E5%8A%A1%E7%AB%AF-%EF%BC%88%E4%BA%8C%EF%BC%89">Linux 环境搭建饥荒服务器教程-配置饥荒服务端</a></li><li>实际操作体验可参考: <a href="https://cloud.tencent.com/developer/labs/lab/10382">Ubuntu Server 搭建饥荒联机版服务端</a></li></ul></div><div class="tab-pane" id="steam-5"><ul><li><strong>创建启动脚本</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~ &amp;&amp; touch startDST.sh</span><br></pre></td></tr></table></figure><figure class="highlight sh"><figcaption><span>PS：此脚本同时启动地上和地下</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">steamcmd_dir=<span class="string">&quot;<span class="variable">$HOME</span>/steamcmd&quot;</span></span><br><span class="line">install_dir=<span class="string">&quot;<span class="variable">$HOME</span>/dstserver&quot;</span></span><br><span class="line">dontstarve_dir=<span class="string">&quot;<span class="variable">$HOME</span>/.klei/DoNotStarveTogether&quot;</span></span><br><span class="line">cluster_name=<span class="string">&quot;Cluster_1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$steamcmd_dir</span>&quot;</span> || fail <span class="string">&quot;Missing <span class="variable">$steamcmd_dir</span> directory!&quot;</span></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$install_dir</span>/bin&quot;</span> || fail </span><br><span class="line"></span><br><span class="line">run_shared=(./dontstarve_dedicated_server_nullrenderer)</span><br><span class="line">run_shared+=(-console)</span><br><span class="line">run_shared+=(-cluster <span class="string">&quot;<span class="variable">$cluster_name</span>&quot;</span>)</span><br><span class="line">run_shared+=(-monitor_parent_process $$)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;<span class="variable">$&#123;run_shared[@]&#125;</span>&quot;</span> -shard Caves  | sed <span class="string">&#x27;s/^/Caves:  /&#x27;</span> &amp;</span><br><span class="line"><span class="string">&quot;<span class="variable">$&#123;run_shared[@]&#125;</span>&quot;</span> -shard Master | sed <span class="string">&#x27;s/^/Master: /&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><strong>添加执行权限</strong></li></ul><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">chmod u+x ./startDST.sh</span><br></pre></td></tr></table></figure></div></div></div><h2 id="二、服务器信息">二、服务器信息</h2><br><p class='p center logo large'>Don't Starve Together</p><p><strong><p class='p center small'>服务器名称：inkss 服务器密码：<span class=bb_spoiler>inkss.cn</span></p></strong></p><br><details cyan><summary class="not-select"> <p>额外添加了三个人物</p> </summary>              <div class='content'>              <p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/DSTGame.assets/image-20200718164133476.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/DSTGame.assets/image-20200718164133476.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="饥荒">  <figcaption>饥荒</figcaption></figure></p>              </div>            </details>]]></content>
    
    
    <summary type="html">Don't Starve Together Server !!!</summary>
    
    
    
    <category term="游戏" scheme="https://inkss.cn/categories/%E6%B8%B8%E6%88%8F/"/>
    
    
    <category term="Steam" scheme="https://inkss.cn/tags/Steam/"/>
    
  </entry>
  
  <entry>
    <title>记一次 Ubuntu 20.04 LTS 安装体验</title>
    <link href="https://inkss.cn/blog/481358a6/"/>
    <id>https://inkss.cn/blog/481358a6/</id>
    <published>2020-06-07T22:19:00.000Z</published>
    <updated>2020-06-07T22:19:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/main.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/main.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p><p><em><span class='p center small gray'>老规矩，操作系统信息走一遍，PS 经过些许定制，图中显示不代表原版效果</span></em></p><h2 id="一、序言">一、序言</h2><p>  我也算是用了很久的 Ubuntu 系统（这个很久大概是一两年左右），初接触在 Ubuntu 14 ，正式入坑为 16，18 退坑。对于 Ubuntu 来说，以日常使用的角度来说，自然首选 LTS 版本，中间的迭代版本是肯定不做考虑的。此次对 Ubuntu 20.04 的安装纯粹是巧合，恰巧的下载了其镜像，再加上比较好奇 “猫猫镭射眼” ，所以就刻录 U 盘尝试了下啦。</p><p>  说说电脑的情况，笔记本，一代 Y7KP ，两个硬盘：一个原装 500G 的 M2 固态，另一个是 500G 的 三星 860EVO 。大概在 Ubuntu18 开始吧，装双系统的流程就已经非常简单的，只需要分割出一片分区（保持未分配状态），然后在安装引导时选择共存，其它交给 Ubuntu 处理即可 <span class="bb_spoiler" title="甚至还上升到了分区比例上的设定 emm">早些年还煞有其事的要求设置各种分区</span>。所以前期准备上也只是分割出一个空白分区而已。</p><h2 id="二、体验">二、体验</h2><p>  直观上的体验：开机时，首先多出了个 Ubuntu 的 Logo ，其次登录界面大改，锁屏背景似乎被砍掉了。桌面壁纸这边，哈，猫猫镭射眼终于等到你。菜单栏，一些实用的功能被引入了系统里：允许自定义文件夹和重命名了（18 的时候还需要插件才能实现）</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img01.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="自定义应用分组">  <figcaption>自定义应用分组</figcaption></figure></p><p>  接着是通知栏，通知面板支持了设置请勿打扰，此外在系统设置里，具体到了每一个软件的通知设置，非常的详尽（从设置的角度似乎这一点被提到了很高的优先级）。默认的主题方面，大同小异吧，谈不上多好也谈不上多差，不过倒是一个全新的主题，不一样的体验，此外声音通知上也有很大的改变，听起来非常的舒服，这个很赞 <span class="bb_spoiler" title="but 我没找到这种包">似乎还支持自定义设置提示声音</span>。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img03.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Do Not Disturb">  <figcaption>Do Not Disturb</figcaption></figure></p><p>  关于显卡，老黄家的显卡毕竟闭源，确实不能打包进系统里，对新手来说，英伟达显卡的安装真的是有点麻烦（毕竟终端下操作不是谁都喜欢的），此处我在安装操作系统时除了选择最小安装外，还勾选了下载第三方驱动，与 18 相比，在开机后的应用列表里，惊喜的看到了 NVIDIA X Server ，竟然自动安装了。附加驱动了直接安装到了 440 版本，最新的版本号不太清楚，但感觉还是挺新的样子，当然这不重要，重要的是自动安装呀，省事儿~</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img04.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="附加驱动">  <figcaption>附加驱动</figcaption></figure></p><p>  在上图中，除了显卡驱动外，还有一个 9560 的网卡驱动，虽然不清楚这里为什么显示的是未工作，可是我这边一直用的是 Wifi 连接的网络呀，233 真奇怪（<span class="bb_spoiler" title="我对 CMAKE 是真的不熟悉，难为我了...">18 时这个驱动得手动安装，还是编译安装你敢信</span>）。</p><h2 id="三、问题">三、问题</h2><p>  新的操作系统在最开始总归是阵痛的，一些软件如 PPA 这类源，没有 20 的发行版，无法导入，Typecho 我都没装上。此外一些样式类的改动很大，Gnome Shell 在样式上出了不兼容的现象（Ubuntu 的桌面样式全是用 CSS 写的） ，很奇怪没有向下兼容。此外，桌面上右键打开终端我点着一直没反应，我设置的快捷键也没有起作用。而且不知道是不是我主题改动的问题，总觉得白的背景页太亮，黑色背景页太暗，简言之就是觉得费眼，当然大部分都是小问题，系统本身还好。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img05.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="点着是没有反应的">  <figcaption>点着是没有反应的</figcaption></figure></p><p>  默认浏览器是火狐，75 版本，我在下载一些东西后，嗯，世界太大，网速太慢，不部署 Clash 真能把你给墨迹死。所以，愉快的就下载 Chrome 啦，本来想下载 Edge 的，但是发现还没 Linux 版本，不过都已经放出消息了，总归会有的。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img06.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img06.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="火狐">  <figcaption>火狐</figcaption></figure></p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img07.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img07.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Chrome, Yes!">  <figcaption>Chrome, Yes!</figcaption></figure></p><p>   软件生态呢？据我所知，国内软件上，输入法有搜狗和百度，文档有 WPS ，听歌有<s>网易云</s>（但是我讨厌它，各种原因导致的），网盘有百度云、坚果云。诸如此类吧，不赘述了，更多的去深度那边看应该更详细吧，哈哈。其实除了这些，还有 snap 呀，有更广泛的选择，比如我就在应用商店里看到了这个，前几天我就用它从 I tell u 下载 2004 的 Win10 镜像：</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img08.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img08.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Motrix">  <figcaption>Motrix</figcaption></figure></p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img10.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img10.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="国产好软，全平台兼容">  <figcaption>国产好软，全平台兼容</figcaption></figure></p><h2 id="四、后续">四、后续</h2><p>   这里有一个非常有意思的事情，Ubutnu 的默认安装行为将引导信息放到了系统所在盘，而我们高傲的 Windows 自然不会主动扫 Linux 的引导信息的。所以情况就是，两者的引导存到了不同的硬盘里，意味着我只需要在 BIOS 调整引导的加载顺序就能控制是否启用 Ubuntu 了（Ubuntu 可以引导 Win）。</p><p>  最后，确实调整了加载顺序，目前来说，软件的缺失对我影响还是蛮大的，等待一段时间吧，补两张图：</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img09.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img09.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="主题配置信息">  <figcaption>主题配置信息</figcaption></figure></p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img11.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu20.assets/img11.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="操作系统信息">  <figcaption>操作系统信息</figcaption></figure></p>]]></content>
    
    
    <summary type="html">总的来说，整个的过程是非常优秀的，可以明显的感受到的进步，一些非常实用的功能也被整合进系统了，比如默认安装的英伟达显卡驱动。当然或许是因为刚发布的缘故，一些软件源还没有适配，需要稍作等待~</summary>
    
    
    
    <category term="随笔" scheme="https://inkss.cn/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="Linux" scheme="https://inkss.cn/tags/Linux/"/>
    
    <category term="Ubuntu" scheme="https://inkss.cn/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>Volantis 主题部署 Pjax</title>
    <link href="https://inkss.cn/blog/76993423/"/>
    <id>https://inkss.cn/blog/76993423/</id>
    <published>2020-05-17T01:27:00.000Z</published>
    <updated>2020-06-02T14:18:00.000Z</updated>
    
    <content type="html"><![CDATA[<p class='p center logo large'><i class="fal fa-narwhal"></i></p><p class='p center logo large'>Volantis</p><p class='p center small'>A Wonderful Theme for Hexo</p><br><p class='p center'>前言：本篇定位于主题的各类处理上，理论篇见 <a href=/blog/80b5f235/>Hexo 博客部署 Pjax 局部刷新</a>。</p><p class='p center'>不多废话，那么，让我们开始吧！</p><h2 id="一、主题分析">一、主题分析</h2><h3 id="1-1-整体性分析">1.1 整体性分析</h3><p>  在对主题做兼容时，最废心力的莫过于处理导航栏、封面这块，理论篇里已经分析过了，Pjax 需要重载的区域为文章主体和侧边栏，而封面、导航栏、页脚是不需要进行重载的。其中麻烦程度以导航栏为最，绑定了大量的按钮、事件等等，此外考虑到移动端适配的缘故，导航栏事实上是有两个存在的，均需要对其处理。</p><p>  而封面部分，早期我没有过于考虑去处理封面，原因是这样的：导航栏是嵌入在封面里的（代码层面），在设置为全屏封面下时，存在了全屏、半屏和无封三种情况，控制起来略有些麻烦。而且存在一个导航栏出现时机的问题，需要计算出浏览器在什么滚动高度下才放出导航栏显示，此外导航栏上还放着嵌套的菜单，这部分通过循环渲染出来，使用 hover 伪类控制其显示，偏偏这种情况 Javascript 又不好处理，在无封面到有封面切换时留下了已经激活的菜单小尾巴。</p><p>  至于页脚，目前唯一的动态数据为访问量的 PV 显示，这部分是直接由 class 定位赋值的，无需过多烦恼，倒是原主题中各个页脚的引用是分散的，需要统一抽离出来。这里插一嘴侧边栏，侧边栏因为是可配置项，从栏目到显示都是可配置的，过于麻烦，还是放在了重载区域内处理吧。</p><h3 id="1-2-插件分析">1.2 插件分析</h3><p>  一个个来细数，大抵以下几种：搜索、评论、懒加载、图片弹出层、代码复制、背景幻灯片、音乐播放器、按钮涟漪动画、页面平滑滚动、公式、不蒜子计数、网址预加载等。</p><p>  这其中，有些无需处理，有些简单的封装成函数重新调用一下即可，而有些则就需要特意分析处理了。除了以上几个插件外，主题里还有两个核心 JS 文件，一为 <code>app.js</code> ，另一为 <code>search.js</code>。这两个前者主要控制导航栏、按钮的激活等；后者则是用于搜索、渲染搜索结果查询等等。前者需要细致的处理，后者只需要修改下搜索结果列，点击搜索结果时，手动发送出一个 Pjax 请求，因为结果列是后期渲染的，没有在页面初始化时被 Pjax 监控到，需要手动发送跳转请求完成无刷新的跳转。</p><h2 id="二、插件的处理">二、插件的处理</h2><p>  此部分，以几类特殊的插件作以说明，未提及者类似处理，相应文件主要位于 <em>_partial/scripts.ejs</em>。</p><h3 id="2-1-函数封装与调用">2.1 函数封装与调用</h3><p>  如前文中所说，一些插件只需要封装成函数，在 Pjax 的 complete 事件中，重新调用即可；而另一些，单独的 JS 的文件引用，无额外函数设置的，只需要重新加载，以下简单介绍一番。</p><p>  （1）Fancybox &amp; lazyload 此两者，均为对图像部分的处理，用于弹窗放大显示和懒加载，其中对 Fancybox 的处理是将初始化函数封装为函数，加载完成时重新调用一下即可，相关代码：<a href="https://github.com/inkss/volantis/blob/master-theme/layout/_third-party/fancybox.ejs">fancybox.ejs</a>（另：Fancybox 担任了图片描述信息的显示，已改为默认启用）。而 Lazyload 需要特殊处理，不过相关兼容已经解决，只需要确认自己的 <em>hexo-lazyload-image</em> 版本大于等于 <em>1.0.9</em> ，接着在全局配置文件下，为 lazyload 添加配置项：<code> isSPA: true</code>。</p><p>  （2）不蒜子，用于文章/站点的计数，无各类配置项目，此类处理为在 JS 引用时加特殊标志 <code>data-pjax</code>，在 Pjax 的 complete 事件中，利用此标志将其移除，并重新加载，类似于：</p><figure class="highlight js"><figcaption><span>不蒜子</span></figcaption><table><tr><td class="code"><pre><span class="line marked">&lt;script defer src=<span class="string">&quot;&lt;%- theme.plugins.busuanzi %&gt;&quot;</span> data-pjax&gt;&lt;/script&gt;</span><br><span class="line"><span class="comment">//....</span></span><br><span class="line">$(<span class="string">&#x27;script[data-pjax], .pjax-reload script&#x27;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span></span><br><span class="line marked"><span class="function">  <span class="title">$</span>(<span class="params">this</span>).<span class="title">parent</span>(<span class="params"></span>).<span class="title">append</span>(<span class="params">$(this).remove()</span>);</span></span><br><span class="line"><span class="function">&#125;);</span></span><br></pre></td></tr></table></figure><p>  （3）Valine，对评论的处理就很有意思了，先谈谈 <em>scripts.ejs</em> 这个文件，与 <em>.js</em> 相比，它可以利用 Hexo 的函数引用主题配置或者页面中的 <em>Front-matter</em> 配置，这部分属性是在渲染阶段读取，并写入到 <em>html</em> 页面。而对于 Valine 来说，在本主题中，是允许不同页面自定义 placeholder 和 path 的，但是！这部分代码不在 Pjax 重加载区域内，也就是意味着丢失了这部分自定义值。自然而然，既然此处无法重载，那就放到能够重载到的位置。</p><p>  这里我利用 ejs 的文件特征，建立了一个 <a href="https://github.com/inkss/volantis/blob/master-theme/layout/_third-party/pjaxdata.ejs">pjaxdata.ejs</a>，将一些值藏（<em>display: none</em>）在这里，写入到 div 标签中，通过 <code> $.trim($('#id').text()</code> 获取值。至于为什么不写成 <code>var xxx = &lt;%=xxx%&gt;</code> 的形式，那是因为在代码压缩时对于这类只声明不调用的变量，会被直接删掉的…</p><p>  综上，对与动态的变量处理是这个样子的：</p><figure class="highlight js"><figcaption><span>pjax_valine()</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pjax_valine</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> valinePath = $.trim($(<span class="string">&#x27;#valine-path&#x27;</span>).text()) === <span class="string">&quot;none&quot;</span> ?</span><br><span class="line">    <span class="built_in">window</span>.location.pathname : $.trim($(<span class="string">&#x27;#valine-path&#x27;</span>).text());</span><br><span class="line">  <span class="keyword">var</span> valinePlaceholder = $.trim($(<span class="string">&#x27;#valine-placeholder&#x27;</span>).text()) === <span class="string">&quot;none&quot;</span> ?</span><br><span class="line">    <span class="string">&quot;&lt;%= theme.comments.valine.placeholder %&gt;&quot;</span> : $.trim($(<span class="string">&#x27;#valine-placeholder&#x27;</span>).text());</span><br><span class="line">  <span class="keyword">var</span> ALLPATH = <span class="string">&#x27;&lt;%= theme.comments.valine.path %&gt;&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(ALLPATH != <span class="string">&#x27;&#x27;</span>) valinePath = ALLPATH;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> valine = <span class="keyword">new</span> Valine();</span><br><span class="line">  valine.init(&#123;</span><br><span class="line">    el: <span class="string">&#x27;#valine_container&#x27;</span>,</span><br><span class="line">    meta: meta,</span><br><span class="line marked">    placeholder: valinePlaceholder,</span><br><span class="line marked">    path: valinePath,</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  )&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  （4）大部分插件都可以循着以上三个的思路完成兼容，更多内容可在 <a href="https://github.com/inkss/volantis/blob/master-theme/layout/_partial/scripts.ejs"><strong>scripts.ejs</strong></a> 查看。</p><h3 id="2-2-Pjax-事件">2.2 Pjax 事件</h3><p>  说了第三方插件后，来谈谈 Pjax 本身吧，Pjax 在处理重载区域时，有一个要求，便是被重载部分必须为所有页面都存在（特指选择器），否则便会失败触发强制刷新。而在 Pjax 自带的四个事件中 <code>send</code> 、<code>complete</code> 、<code>success</code> 、<code>error</code> ，send 和 complete 可以用来处理一些函数的解绑与注册，此外还可以用来控制加载动画的显隐，error 可以在监听到失败时做个提醒呀之类的，success 用的不多，不是很需要。</p><p>  这里附录一下本次兼容的 Pjax 函数内容吧：</p><details blue><summary class="not-select"> <p>Pjax 函数</p> </summary>              <div class='content'>              <figure class="highlight js"><figcaption><span>pjax 函数</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pjax;</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  pjax = <span class="keyword">new</span> Pjax(&#123;</span><br><span class="line">    elements: <span class="string">&#x27;a[href]:not([href^=&quot;#&quot;]):not([href=&quot;javascript:void(0)&quot;]):not([pjax-fancybox])&#x27;</span>,</span><br><span class="line">    selectors: [</span><br><span class="line">      <span class="string">&quot;title&quot;</span>,</span><br><span class="line">      <span class="string">&quot;#pjax-container&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    cacheBust: <span class="literal">false</span>,   <span class="comment">// url 地址追加时间戳，用以避免浏览器缓存</span></span><br><span class="line">    timeout: <span class="string">&#x27;5000&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:send&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">window</span>.stop(); <span class="comment">// 相当于点击了浏览器的停止按钮</span></span><br><span class="line">  <span class="built_in">window</span>.subData = <span class="literal">null</span>; <span class="comment">// 移除标题（用于一二级导航栏切换处）</span></span><br><span class="line">  $.fancybox.close();    <span class="comment">// 关闭弹窗</span></span><br><span class="line">  $(<span class="string">&#x27;.nav-main&#x27;</span>).find(<span class="string">&#x27;.list-v&#x27;</span>).not(<span class="string">&#x27;.menu-phone&#x27;</span>).css(<span class="string">&quot;display&quot;</span>,<span class="string">&quot;none&quot;</span>); <span class="comment">// 移除小尾巴</span></span><br><span class="line">  $(<span class="string">&#x27;.menu-phone.list-v&#x27;</span>).css(<span class="string">&quot;display&quot;</span>,<span class="string">&quot;none&quot;</span>); <span class="comment">// 移除小尾巴</span></span><br><span class="line">  $(<span class="string">&#x27;.l_header .switcher .s-search&#x27;</span>).removeClass(<span class="string">&#x27;active&#x27;</span>); <span class="comment">// 关闭移动端激活的搜索框</span></span><br><span class="line">  $(<span class="string">&#x27;.l_header&#x27;</span>).removeClass(<span class="string">&#x27;z_search-open&#x27;</span>); <span class="comment">// 关闭移动端激活的搜索框</span></span><br><span class="line">  $(<span class="string">&#x27;.wrapper&#x27;</span>).removeClass(<span class="string">&#x27;sub&#x27;</span>); <span class="comment">// 跳转页面时关闭二级导航</span></span><br><span class="line">  $(<span class="built_in">window</span>).unbind(<span class="string">&#x27;resize&#x27;</span>);    <span class="comment">// 解绑</span></span><br><span class="line">  $(<span class="built_in">window</span>).unbind(<span class="string">&#x27;scroll&#x27;</span>);    <span class="comment">// 解绑</span></span><br><span class="line">  $(<span class="built_in">window</span>).unbind(<span class="string">&#x27;click&#x27;</span>);     <span class="comment">// 解绑</span></span><br><span class="line">  $(<span class="built_in">document</span>).unbind(<span class="string">&#x27;scroll&#x27;</span>);  <span class="comment">// 解绑</span></span><br><span class="line">  NProgress.start();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:complete&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 关于百度统计对 SPA 页面的处理：</span></span><br><span class="line">  <span class="comment">// 方案一：百度统计&gt;管理&gt;单页应用设置中，打开开启按钮即可对SPA进行统计。 https://tongji.baidu.com/web/help/article?id=324</span></span><br><span class="line">  <span class="comment">// 方案二：取消注释下列代码。 https://tongji.baidu.com/web/help/article?id=235</span></span><br><span class="line">  <span class="comment">// &lt;% if (config.baidu_analytics_key) &#123; %&gt;</span></span><br><span class="line">  <span class="comment">// _hmt.push([&#x27;_trackPageview&#x27;, document.location.pathname]);</span></span><br><span class="line">  <span class="comment">// &lt;% &#125; %&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 关于谷歌统计对 SPA 页面的处理：</span></span><br><span class="line">  <span class="comment">// 当应用以动态方式加载内容并更新地址栏中的网址时，也应该更新通过 gtag.js 存储的网页网址。</span></span><br><span class="line">  <span class="comment">// https://developers.google.cn/analytics/devguides/collection/gtagjs/single-page-applications?hl=zh-cn</span></span><br><span class="line">  &lt;% <span class="keyword">if</span> (config.google_analytics_key) &#123; %&gt;</span><br><span class="line">    <span class="built_in">window</span>.dataLayer = <span class="built_in">window</span>.dataLayer || [];</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">gtag</span>(<span class="params"></span>)</span>&#123;dataLayer.push(<span class="built_in">arguments</span>);&#125;</span><br><span class="line">    gtag(<span class="string">&#x27;config&#x27;</span>, <span class="string">&#x27;&lt;%- config.google_analytics_key %&gt;&#x27;</span>, &#123;<span class="string">&#x27;page_path&#x27;</span>: <span class="built_in">document</span>.location.pathname&#125;);</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">  </span><br><span class="line">  $(<span class="string">&#x27;.nav-main&#x27;</span>).find(<span class="string">&#x27;.list-v&#x27;</span>).not(<span class="string">&#x27;.menu-phone&#x27;</span>).removeAttr(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;&quot;</span>); <span class="comment">// 移除小尾巴的移除</span></span><br><span class="line">  $(<span class="string">&#x27;.menu-phone.list-v&#x27;</span>).removeAttr(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;&quot;</span>); <span class="comment">// 移除小尾巴的移除</span></span><br><span class="line">  $(<span class="string">&#x27;script[data-pjax], .pjax-reload script&#x27;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="built_in">this</span>).parent().append($(<span class="built_in">this</span>).remove());</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    pjax_fancybox();</span><br><span class="line">    &lt;% <span class="keyword">if</span> (theme.plugins.scrollreveal &amp;&amp; theme.plugins.scrollreveal.js) &#123; %&gt;</span><br><span class="line">      pjax_scrollrebeal();</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span> (theme.plugins.clipboard &amp;&amp; (theme.style.body.highlight.copy_btn == <span class="literal">true</span>)) &#123; %&gt;</span><br><span class="line">      pjax_initCopyCode();</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span> (enableValine)&#123; %&gt;</span><br><span class="line">      pjax_valine();</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span> (enableMiniValine)&#123; %&gt;</span><br><span class="line">      pjax_minivaline();</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e);</span><br><span class="line">  &#125;</span><br><span class="line">  NProgress.done();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:error&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  NProgress.done();</span><br><span class="line">  <span class="built_in">window</span>.location.href = event.triggerElement.href;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="三、主题核心代码处理">三、主题核心代码处理</h2><p>  主要为两个 js 文件，内容很翔实，改动量不小，慢慢更新系列~</p><h3 id="3-1-搜索">3.1 搜索</h3><p>  在前面我就说了，搜索结果是后期渲染上的，所以没有被 Pjax 整成自己的样子（哈哈），所以那些结果标签点过去立马来个刷新跳转，故此部分便只需要对这点处理下就行啦。这里需要利用 Pjax 的 <code>pjax.refresh([el])</code> 函数：</p><p>  Use this method to bind Pjax to children of a DOM element that didn’t exist when Pjax was initialised e.g. content inserted dynamically by another library or script. If called with no arguments, Pjax will parse the entire document again to look for newly-inserted elements.</p><figure class="highlight js"><figcaption><span>refresh([el])</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// Inside a callback or Promise that runs after new DOM content has been inserted</span></span><br><span class="line"><span class="keyword">var</span> newContent = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.new-content&quot;</span>);</span><br><span class="line"></span><br><span class="line">pjax.refresh(newContent);</span><br></pre></td></tr></table></figure><p>  也就是重新加载 #u-search 区域，接着监听 send 事件，关闭搜索窗口：</p><figure class="highlight js"><figcaption><span>Pjax 处理</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">html += <span class="string">&quot;&lt;script&gt;try&#123;pjax.refresh(document.querySelector(&#x27;#u-search&#x27;))&#125;catch(e)&#123;console.log(e)&#125;&lt;/script&gt;&quot;</span>;</span><br><span class="line">html += <span class="string">&quot;&lt;script&gt;document.addEventListener(&#x27;pjax:send&#x27;,function()&#123;$(&#x27;#u-search&#x27;).fadeOut(500);$(&#x27;body&#x27;).removeClass(&#x27;modal-active&#x27;)&#125;);&lt;/script&gt;&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="3-2-导航栏">3.2 导航栏</h3><p>  先放链接：<a href="https://github.com/inkss/volantis/blob/master-theme/source/js/app.js"><strong>app.js</strong></a>，看心情再决定补不补思路。</p><h3 id="3-3-封面">3.3 封面</h3><p>  是这样的，原主题对封面的处理是通过读取页面配置来控制渲染，大概三种不同渲染场景，而在 Pjax 处理时简化为两种场景，全局不开启封面和开启封面，别的就通过代码来控制样式啦。样式处理无非是控制显示、隐藏，但是呢，还需要控制导航栏出现时机，这部分在上一小节讲。</p><figure class="highlight js"><figcaption><span>封面控制</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">if</span>(<span class="string">&quot;&lt;%=frontMatterCover%&gt;&quot;</span> == <span class="string">&quot;none&quot;</span>) &#123;  <span class="comment">// 移除封面</span></span><br><span class="line">      <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].style.display = <span class="string">&quot;none&quot;</span>;  </span><br><span class="line">      <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;l_body&#x27;</span>)[<span class="number">0</span>].classList.add(<span class="string">&quot;nocover&quot;</span>);</span><br><span class="line">      <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;l_header&#x27;</span>,<span class="string">&#x27;cover-wrapper&#x27;</span>)[<span class="number">0</span>].classList.add(<span class="string">&quot;show&quot;</span>); </span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="string">&quot;&lt;%=frontMatterCover%&gt;&quot;</span> == <span class="string">&quot;blog&quot;</span>) &#123;  <span class="comment">// 半屏</span></span><br><span class="line">          <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].classList.remove(<span class="string">&quot;full&quot;</span>);</span><br><span class="line">          <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].classList.add(<span class="string">&quot;half&quot;</span>);</span><br><span class="line">          <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;scroll-down&#x27;</span>)[<span class="number">0</span>].style.display = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;&lt;%=frontMatterCover%&gt;&quot;</span> == <span class="string">&quot;docs&quot;</span>) &#123; <span class="comment">// 全屏</span></span><br><span class="line">          <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].classList.remove(<span class="string">&quot;half&quot;</span>);</span><br><span class="line">          <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].classList.add(<span class="string">&quot;full&quot;</span>);</span><br><span class="line">          <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;scroll-down&#x27;</span>)[<span class="number">0</span>].style.display = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;cover&#x27;</span>)[<span class="number">0</span>].style.display = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;l_body&#x27;</span>,<span class="string">&#x27;show&#x27;</span>)[<span class="number">0</span>].classList.remove(<span class="string">&quot;nocover&quot;</span>);</span><br><span class="line">      <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;l_header&#x27;</span>,<span class="string">&#x27;cover-wrapper&#x27;</span>)[<span class="number">0</span>].classList.remove(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>  为了照顾显示效果，这部分处理是放在封面加载之后文章加载之前，好处是不会出现闪一下的效果（默认整个封面是隐藏的），坏处是此时 Jquery 没加载，得用原生 JS 来写。</p><h2 id="四、后续">四、后续</h2><p>  没有后续，完结撒花~</p>]]></content>
    
    
    <summary type="html">本篇文章记录了我对 Volantis 主题做 Pjax 兼容的种种，大抵算是种记录吧~</summary>
    
    
    
    <category term="博客" scheme="https://inkss.cn/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="Hexo" scheme="https://inkss.cn/tags/Hexo/"/>
    
    <category term="Pjax" scheme="https://inkss.cn/tags/Pjax/"/>
    
    <category term="Volantis" scheme="https://inkss.cn/tags/Volantis/"/>
    
  </entry>
  
  <entry>
    <title>WSL 之宝塔面板的部署</title>
    <link href="https://inkss.cn/blog/b2b02edd/"/>
    <id>https://inkss.cn/blog/b2b02edd/</id>
    <published>2020-05-02T17:15:00.000Z</published>
    <updated>2020-05-12T11:27:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>  在很早之前，我就有一个需求，需要一个小型灵活的本地服务器，因为目的在于轻便、快捷，所以倘若搭建 Nginx 到本机又有些浪费性能，过于臃肿，毕竟不是服务器。而小型服务器的话如 Tomcat 启动起来还是有些麻烦。我查过使用 PhpStudy 的这类软件，感觉用起来又不是那么顺心如意。此之前，一直使用的是 VS Code 里的插件：<code>Live Server</code> 完成轻量网页的启动，也算是集编辑、运行、查看于一身了。</p><p>  这是前话，然后下面讲讲 WSL，VS Code 可以通过 Rmote - WSL 链接到本地的 Linux 子系统，我也是一直这样做的，偶尔一些环境搭建起来麻烦的使用子系统做的，我是用的子系统 Ubuntu 18.04 ，倒也是我最熟悉的一个系统了。言归正传，本身我有一台阿里云的 CentOS 服务器，在上面搭建了宝塔面板，于是便突发奇想，能否在本机装上面板呢？这样对与网站需求来说就有了更多的用途。</p><h2 id="一、面板部署">一、面板部署</h2><p>  这部分没有什么好说的，普通的命令行安装，利用 Root 账户执行安装即可，可能会费一些时间，但是成绩斐然，顺利的部署上了（说到此，忽然想起最新的发行版，20.04 似乎还有一些软件上的不兼容，18.04 还是再等等不要升级的好）。</p><p>  部署成功后，在终端的结果处收到地址、账户、密码，登录处理一些就行了。地址默认位 <code>127.0.0.1</code> ，是的没错即使是子系统，其实也是和本地主机的 IP 相同的，接下来就先改改端口、安全入口什么的即可。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/WSL%E7%9A%84%E5%88%A9%E7%94%A8.assets/image-20200502160453899.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/WSL%E7%9A%84%E5%88%A9%E7%94%A8.assets/image-20200502160453899.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="宝塔面板">  <figcaption>宝塔面板</figcaption></figure></p><p>  配置信息一目了然，甚至原本的 Windows 下磁盘也被显示出来的，接下来也就是到软件商店里安装环境了，为了测试此处使用的环境与服务器端用的是一致的：Nginx 1.16.1，Mysql 5.7.29，PHP 7.2，当然还有 Pure-Ftpd 以作备用。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/WSL%E7%9A%84%E5%88%A9%E7%94%A8.assets/image-20200502161012050.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/WSL%E7%9A%84%E5%88%A9%E7%94%A8.assets/image-20200502161012050.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="PHP是世界上最好的编程语言">  <figcaption>PHP是世界上最好的编程语言</figcaption></figure></p><p>  为什么要选择在子系统上安装，那就不得不说一个资源占用的问题了，以上环境倘若开启了自启又略显浪费，而不开启的话，在 Windows 下启动还要跑到服务里，找到相关服务才能开启，而个人认为最理想的莫过于即用即启，本身不需要长时间运行服务器，而最重要的就是面板的存在减少了大量配置文件的修改，更别说服务器这类环境天然适合 Linux 系统呀。</p><h2 id="二、启动">二、启动</h2><p>  是的，没错，Windows 在启动时不会处理任何 WSL 的程序，包括不启动宝塔面板。这里参考了 <a href="https://blog.csdn.net/toopoo/article/details/85733566">Win10 子系统 ssh 服务自启动设置</a> 。宝塔本身有启动脚本，我们不用手写脚本了，然后大概流程就是在 Windwos 的启动文件里放一个 vbs 脚本，在开机时利用 <code>wscript.shell</code> 执行命令。</p><p>  思路很简单，<code>wsl -d DistributionName -u UserName command</code>，子系统名称可以用 <code>wsl -l</code> 查看，综上：</p><figure class="highlight vbs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Set</span> ws = <span class="built_in">CreateObject</span>(<span class="string">&quot;Wscript.Shell&quot;</span>)</span><br><span class="line">ws.run <span class="string">&quot;wsl -d Ubuntu -u root /etc/init.d/bt start&quot;</span>, vbhide</span><br></pre></td></tr></table></figure><p>  如此，愉快的玩耍吧~</p>]]></content>
    
    
    <summary type="html">Windows Subsystem for Linux (WSL) is a compatibility layer for running Linux binary executables (in ELF format) natively on Windows 10 and Windows Server 2019.</summary>
    
    
    
    <category term="资料" scheme="https://inkss.cn/categories/%E8%B5%84%E6%96%99/"/>
    
    
    <category term="Linux" scheme="https://inkss.cn/tags/Linux/"/>
    
    <category term="WSL" scheme="https://inkss.cn/tags/WSL/"/>
    
  </entry>
  
  <entry>
    <title>城市天际线基础 MOD</title>
    <link href="https://inkss.cn/blog/728c42d9/"/>
    <id>https://inkss.cn/blog/728c42d9/</id>
    <published>2020-04-06T17:53:00.000Z</published>
    <updated>2020-05-18T11:11:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、前言">一、前言</h2><p>  城市天际线（Cities: Skylines）是我最喜欢的一款游戏，也有可能是我唯一一个连续不断购买 DLC 的游戏了，哈哈，万恶的 P 社。有那么一个说法，“枪毙P社玩家，没有一个是冤枉的？”，此外还有另外一句后续，千万别漏掉天际线玩家。</p><p>  当然天际线玩家比不上 P 社四萌里的战争洗地，也比不过群星里动辄就是一发歼星炮，天际线玩家还好只是安安稳稳的当着一市之长而已，当然早些年哔哩哔哩上，有着层次不穷的 粪水XX 还是比较恶劣的，不过现在也有走高端向 <a href="https://space.bilibili.com/156322562">WilliamC超蜀黍</a> 的《城市天际线》天际线造景极致1:1城市第一季第1集》的出现。</p><p>  言归正传，最近天际线也更新了一个主要的 DLC ：《Cities: Skylines - Sunset Harbor》，所以忽然发现路陆陆续续的也出了不少了，很想来一次原版体验，所以移除了大部分 MOD ，只保留了一下个人认为相较基础的订阅，不过特此记录了一些基础性的打底 MOD。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/image-20200406123027826.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/image-20200406123027826.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="全 DLC 了解一下">  <figcaption>全 DLC 了解一下</figcaption></figure></p><h2 id="二、基础性-MOD">二、基础性 MOD</h2><blockquote><p>天际线基础 MOD 安利，大都不涉及资产，大都为对游戏基础性功能修改，我将其视为打底 MOD。</p><p>在创意工坊里搜索这些 MOD 的名称订阅便能使用了。</p></blockquote><h3 id="1-Remove-Need-For-Power-Lines">1. Remove Need For Power Lines</h3><div class="tabs" id="tab1"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab1-1">简介</a></li><li class="tab"><a href="#tab1-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab1-1"><p>移除游戏对电力线的需求，不需要拉各种电线啦。</p></div><div class="tab-pane" id="tab1-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/572888650_preview_2015-12-10_00002.jpg" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/572888650_preview_2015-12-10_00002.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="2-Remove-Need-For-Pipes">2. Remove Need For Pipes</h3><div class="tabs" id="tab2"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab2-1">简介</a></li><li class="tab"><a href="#tab2-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab2-1"><p>移除管道（水管、热水管）的需求，PS：供水口、排水口还是需要连接的。</p></div><div class="tab-pane" id="tab2-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/576997275_preview_2015-12-16_00001.jpg" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/576997275_preview_2015-12-16_00001.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="3-Mod-Achievement-Enabler">3. Mod Achievement Enabler</h3><div class="tabs" id="tab3"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab3-1">简介</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab3-1"><p>在开启 MOD 订阅的同时，可以继续获得成就，聊胜于无啦。</p></div></div></div><h3 id="4-No-Border-Limit-Camera">4. No Border Limit Camera</h3><div class="tabs" id="tab4"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab4-1">简介</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab4-1"><p>可以不受限制的移动视角，可以预览整个地图了。</p></div></div></div><h3 id="5-Tree-Brush">5. Tree Brush</h3><div class="tabs" id="tab5"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab5-1">简介</a></li><li class="tab"><a href="#tab5-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab5-1"><p>树刷，可以在地图上批量刷出各类树木，一般是用来建工厂时用的，算是造景用 MOD 之一。</p></div><div class="tab-pane" id="tab5-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/steamworkshop_webupload_previewfile_406723376_preview.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/steamworkshop_webupload_previewfile_406723376_preview.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="6-All-25-Areas-purchasable">6. All 25 Areas purchasable</h3><div class="tabs" id="tab6"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab6-1">简介</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab6-1"><p>解锁地图中所有的 25 个格子，其实还有地图全解锁的，但是考虑到电脑性能和规模，25 格够用啦。</p></div></div></div><h3 id="7-Unlock-All-Wonders-Landmarks">7. Unlock All + Wonders &amp; Landmarks</h3><div class="tabs" id="tab7"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab7-1">简介</a></li><li class="tab"><a href="#tab7-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab7-1"><p>顾名思义，解锁所有奇观、独特建筑、进程里程碑，做任务什么的还是挺麻烦的。</p></div><div class="tab-pane" id="tab7-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/458519223_preview_Cities_2017-10-21_19-33-17.jpg" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/458519223_preview_Cities_2017-10-21_19-33-17.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="8-TM-PE-V11-STABLE">8. TM:PE V11 STABLE</h3><div class="tabs" id="tab8"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab8-1">简介</a></li><li class="tab"><a href="#tab8-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab8-1"><p>一个非常强大的 MOD ，可以对天际线里的交通状况做出很大的改善。</p></div><div class="tab-pane" id="tab8-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/1637663252_preview_slideshow.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/1637663252_preview_slideshow.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="9-Find-It">9. Find It!</h3><div class="tabs" id="tab9"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab9-1">简介</a></li><li class="tab"><a href="#tab9-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab9-1"><p>一款造景必备的 MOD ，可以在地图上摆放各种小组件。</p></div><div class="tab-pane" id="tab9-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/837734529_preview_tuto.jpg" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/837734529_preview_tuto.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="10-Prop-Line-Tool">10. Prop Line Tool</h3><div class="tabs" id="tab10"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab10-1">简介</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab10-1"><p>造景用 MOD 之二，可以像规划道理一样规划摆件。</p></div></div></div><h3 id="11-Fine-Road-Anarchy-2-0-2">11. Fine Road Anarchy 2.0.2</h3><div class="tabs" id="tab11"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab11-1">简介</a></li><li class="tab"><a href="#tab11-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab11-1"><p>可以不受限制的摆放道路，解除各种碰撞规则，做出一些稀奇古怪的路线模型。</p></div><div class="tab-pane" id="tab11-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/1844440354_preview_1.jpg" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/1844440354_preview_1.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="12-Demand-Master">12. Demand Master</h3><div class="tabs" id="tab12"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab12-1">简介</a></li><li class="tab"><a href="#tab12-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab12-1"><p>需求控制，就是可以自定义人口、商业、工业需求，锁死什么的。</p></div><div class="tab-pane" id="tab12-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/steamworkshop_webupload_previewfile_409776678_preview.jpg" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/steamworkshop_webupload_previewfile_409776678_preview.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="13-Loading-Screen-Mod">13. Loading Screen Mod</h3><div class="tabs" id="tab13"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab13-1">简介</a></li><li class="tab"><a href="#tab13-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab13-1"><p>在我看来最大的用处是可以导出加载 MOD 时的报告，查清冲突、缺失等。</p></div><div class="tab-pane" id="tab13-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/667342976_preview_1.jpg" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/667342976_preview_1.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="14-Move-It">14. Move It</h3><div class="tabs" id="tab14"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab14-1">简介</a></li><li class="tab"><a href="#tab14-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab14-1"><p>造景用 MOD 之一，可以对城市外观做出更精致的修改，需要两个前置依赖。</p></div><div class="tab-pane" id="tab14-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/1619685021_preview_Workshop-screenshot-deeheks.jpg" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/1619685021_preview_Workshop-screenshot-deeheks.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="15-Precision-Engineering">15. Precision Engineering</h3><div class="tabs" id="tab15"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab15-1">简介</a></li><li class="tab"><a href="#tab15-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab15-1"><p>在建造道路时，拥有更精准的角度提示。</p></div><div class="tab-pane" id="tab15-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/445589127_preview_branching.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/445589127_preview_branching.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="16-Clouds-Fog-Toggler">16. Clouds &amp; Fog Toggler</h3><div class="tabs" id="tab16"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab16-1">简介</a></li><li class="tab"><a href="#tab16-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab16-1"><p>移除缩小时的云雾，此外还可以移除工业烟雾。</p></div><div class="tab-pane" id="tab16-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/previewfile_523824395.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/previewfile_523824395.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="17-AutoLineColor-Redux">17. AutoLineColor Redux</h3><div class="tabs" id="tab17"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab17-1">简介</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab17-1"><p>在创建公共交通路线时自动分配不同的颜色，其实我是有点疑惑的，因为 switch 上的天际线明明有这个功能，为什么 PC 版的反而没有了呢？</p></div></div></div><h3 id="18-Customize-It">18. Customize It!</h3><div class="tabs" id="tab18"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab18-1">简介</a></li><li class="tab"><a href="#tab18-2">截图</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab18-1"><p>可以修改各种建筑的需求，必须电力啊，噪音啊，污染啊，支出啊什么的。</p></div><div class="tab-pane" id="tab18-2"><p><img fancybox src="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/1369729955_preview_Screenshot_2.jpg" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%9F%8E%E5%B8%82%E5%A4%A9%E9%99%85%E7%BA%BF%E5%9F%BA%E7%A1%80MOD.assets/1369729955_preview_Screenshot_2.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p></div></div></div><h3 id="19-Prefab-Hook">19. Prefab Hook</h3><div class="tabs" id="tab19"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab19-1">简介</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab19-1"><p>大部分 MOD 的前置依赖。</p></div></div></div><h2 id="三、建筑类-MOD">三、建筑类 MOD</h2><p>未完待续…</p>]]></content>
    
    
    <summary type="html">城市天际线是我最喜欢的一款游戏，也有可能是我唯一一个连续不断购买 DLC 的游戏了，哈哈，万恶的 P 社。有那么一个说法，“枪毙P社玩家，没有一个是冤枉的？”，此外还有另外一句后续，千万别漏掉天际线玩家。</summary>
    
    
    
    <category term="游戏" scheme="https://inkss.cn/categories/%E6%B8%B8%E6%88%8F/"/>
    
    
    <category term="Steam" scheme="https://inkss.cn/tags/Steam/"/>
    
    <category term="Cities: Skylines" scheme="https://inkss.cn/tags/Cities-Skylines/"/>
    
    <category term="创意工坊" scheme="https://inkss.cn/tags/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序 Text 组件文本换行</title>
    <link href="https://inkss.cn/blog/d24a2bc6/"/>
    <id>https://inkss.cn/blog/d24a2bc6/</id>
    <published>2020-04-03T15:34:00.000Z</published>
    <updated>2020-04-03T15:34:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>  使用小程序发现了一个现象，后端返回的数据在前端显示时没有换行，原原本本的合并为一行显示了，原因大概是从数据库返回给前端时部分数据被转义了。如此便使用正则处理返回的数据，顺便按照换行符分割成数组吧：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">onLoad: <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line">  <span class="keyword">let</span> item = <span class="built_in">JSON</span>.parse(options.item);</span><br><span class="line">  <span class="keyword">let</span> content = item.rumourContent.replace(<span class="regexp">/\\n/g</span>, <span class="string">&quot;\n&quot;</span>); <span class="comment">// 替换出换行符</span></span><br><span class="line">  that.setData(&#123;</span><br><span class="line">    rumourInfo: item,</span><br><span class="line">    rumourContent: content.split(<span class="string">&quot;\n&quot;</span>) <span class="comment">// 分割吧</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;content &quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;textShow&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;rumourContent&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><ul><li>换行符</li></ul><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/%E5%B0%8F%E7%A8%8B%E5%BA%8Ftext%E7%BB%84%E4%BB%B6%E5%86%85%E5%AE%B9%E6%8D%A2%E8%A1%8C.assets/image-20200403153035661.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%B0%8F%E7%A8%8B%E5%BA%8Ftext%E7%BB%84%E4%BB%B6%E5%86%85%E5%AE%B9%E6%8D%A2%E8%A1%8C.assets/image-20200403153035661.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="换行符">  <figcaption>换行符</figcaption></figure></p><ul><li>效果</li></ul><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/%E5%B0%8F%E7%A8%8B%E5%BA%8Ftext%E7%BB%84%E4%BB%B6%E5%86%85%E5%AE%B9%E6%8D%A2%E8%A1%8C.assets/image-20200403152910344.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E5%B0%8F%E7%A8%8B%E5%BA%8Ftext%E7%BB%84%E4%BB%B6%E5%86%85%E5%AE%B9%E6%8D%A2%E8%A1%8C.assets/image-20200403152910344.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="效果">  <figcaption>效果</figcaption></figure></p>]]></content>
    
    
    <summary type="html">调用接口返回的数据前端显示时不能换行，颇为波折的处理一番。</summary>
    
    
    
    <category term="前端" scheme="https://inkss.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="微信小程序" scheme="https://inkss.cn/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="组件" scheme="https://inkss.cn/tags/%E7%BB%84%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>一个简单的分页模型</title>
    <link href="https://inkss.cn/blog/24abf2bd/"/>
    <id>https://inkss.cn/blog/24abf2bd/</id>
    <published>2020-04-01T17:38:00.000Z</published>
    <updated>2020-09-06T14:32:46.188Z</updated>
    
    <content type="html"><![CDATA[<h2 id="模型">模型</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">设置分页大小：pageLength = 10</span><br><span class="line">设置首页跨度：start = 0</span><br><span class="line">​                end = pageLength</span><br><span class="line">发送请求：balabala</span><br><span class="line">获取数据：var arr1 = 结果数组</span><br><span class="line">​          var arr2 = 当前返回数据</span><br><span class="line">​              arr1 = arr1.concat（arr2） 合并数组</span><br><span class="line"></span><br><span class="line">分页判断：if arr1.length == pageLength 标记所有数据加载完毕</span><br><span class="line">触底下拉：start += pageLength</span><br><span class="line">​            end += pageLength</span><br><span class="line"></span><br><span class="line">后端：LIMIT ?,?</span><br><span class="line">​      req.start</span><br><span class="line">​      req.end - req.start</span><br></pre></td></tr></table></figure><h2 id="小程序">小程序</h2><p>在列表的最末尾处，添加加载完毕的标志：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-divider</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;!isMore&#125;&#125;&quot;</span> <span class="attr">contentPosition</span>=<span class="string">&quot;center&quot;</span>&gt;</span>没有更多了<span class="tag">&lt;/<span class="name">van-divider</span>&gt;</span></span><br></pre></td></tr></table></figure><p>处理滑动事件，分页的递增也是发生在此处的，页面全部加载完毕后就不用继续发请求了。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onReachBottom: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> that = <span class="built_in">this</span>;</span><br><span class="line marked">  <span class="keyword">if</span> (that.data.isMore) &#123;</span><br><span class="line">      that.setData(&#123;</span><br><span class="line marked">        start: that.data.start + that.data.pageLength,</span><br><span class="line marked">        end: that.data.end + that.data.pageLength</span><br><span class="line">      &#125;);</span><br><span class="line">      that.knowledgeQry(); <span class="comment">// 发送后端请求</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="string">&#x27;全部加载完毕了 qwq&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>后端发起搜索，存值啊什么的，本次获取列表的长度小于分页长度，就可以视为到了最后一页啦。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">knowledgeQry: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  app.wxRequest(<span class="string">&#x27;加载中&#x27;</span>, url, req, <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> data = res.resp;</span><br><span class="line">    <span class="keyword">let</span> arr1 = that.data.searchResult;</span><br><span class="line">    <span class="keyword">let</span> arr2 = data.knowledges;</span><br><span class="line marked">    arr1 = arr1.concat(arr2);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">JSON</span>.stringify(data) == <span class="string">&quot;&#123;&#125;&quot;</span>) &#123;</span><br><span class="line">      that.setData(&#123;</span><br><span class="line">        searchResult: [],</span><br><span class="line">        isSearch: <span class="literal">true</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      that.setData(&#123;</span><br><span class="line">        searchResult: arr1,</span><br><span class="line marked">        isMore: arr1.length != recordsTotal</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>搜索的时候，判断下输入框文本是否改变，没改变就不发后端了，此外搜索时相应变量重置~</p><h2 id="UI-界面">UI 界面</h2><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%86%E9%A1%B5%E6%A8%A1%E5%9E%8B.assets/image-20200401173445954.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%86%E9%A1%B5%E6%A8%A1%E5%9E%8B.assets/image-20200401173445954.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="UI 界面">  <figcaption>UI 界面</figcaption></figure></p>]]></content>
    
    
    <summary type="html">一个简单的分页模型，可以用在下拉刷新的时候，云云~</summary>
    
    
    
    <category term="前端" scheme="https://inkss.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="微信小程序" scheme="https://inkss.cn/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    <category term="分页" scheme="https://inkss.cn/tags/%E5%88%86%E9%A1%B5/"/>
    
  </entry>
  
  <entry>
    <title>Git 打包命令</title>
    <link href="https://inkss.cn/blog/59d81549/"/>
    <id>https://inkss.cn/blog/59d81549/</id>
    <published>2019-12-31T11:27:00.000Z</published>
    <updated>2020-05-12T11:27:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Windows 下 powershell 测试通过</p></blockquote><ul><li>打包最后一次提交涉及到的文件：</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip --output=files.zip HEAD $(git diff-tree -r --no-commit-id --name-only --diff-filter=ACMRT HEAD)</span><br></pre></td></tr></table></figure><ul><li>打包指定（ID）提交涉及到的文件：</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip --output=files.zip HEAD $(git diff-tree -r --no-commit-id --name-only --diff-filter=ACMRT xxxxxx)</span><br></pre></td></tr></table></figure><ul><li>打包两个版本之间的差异：</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip --output=files.zip HEAD $(git diff-tree -r xxxxxx1 --name-only --diff-filter=ACMRT xxxxxx2)</span><br></pre></td></tr></table></figure><ul><li>打包某次提交之后的所有文件（不含当前）</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip --output=files.zip HEAD $(git diff-tree -r xxxxxx --name-only --diff-filter=ACMRT HEAD)</span><br></pre></td></tr></table></figure><ul><li>打包 master</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip --output master.zip master</span><br></pre></td></tr></table></figure><ul><li>打包 head</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip --output head.zip HEAD</span><br></pre></td></tr></table></figure><ul><li>打包 tag</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip --output v1.0.0.zip v1.0.0</span><br></pre></td></tr></table></figure><ul><li>打包最后修改的文件（不管有没有 add 或 commit )，只要 git diff 有变化就会打包</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip -o update.zip HEAD $(git diff --name-only HEAD^)</span><br></pre></td></tr></table></figure><ul><li>打包两个分支之间的差异</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip -o update.zip HEAD $(git diff --name-only master 1.0.0)</span><br></pre></td></tr></table></figure><ul><li>打包两个版本 (commit) 间的差异</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive --format=zip -o update.zip HEAD $(git diff --name-only HEAD~2)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">一些 Git 打包命令，比如打包某次提交之后的所有文件，适合 Powershell 下使用。</summary>
    
    
    
    <category term="资料" scheme="https://inkss.cn/categories/%E8%B5%84%E6%96%99/"/>
    
    
    <category term="Git" scheme="https://inkss.cn/tags/Git/"/>
    
    <category term="打包" scheme="https://inkss.cn/tags/%E6%89%93%E5%8C%85/"/>
    
    <category term="Powershell" scheme="https://inkss.cn/tags/Powershell/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 博客部署 Pjax 局部刷新</title>
    <link href="https://inkss.cn/blog/80b5f235/"/>
    <id>https://inkss.cn/blog/80b5f235/</id>
    <published>2019-12-12T23:56:00.000Z</published>
    <updated>2020-08-05T23:56:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>  本篇定位于 <strong>理论知识</strong> ，实际应用见 <a href="/blog/76993423/">Volantis 主题部署 Pjax</a>，前置知识，SPA 页面。</p><p>  我在对博客做 Pjax 兼容时，发现文档资料都很少，零零散散，整个过程几乎是摸索着进行的，百思不得其解，所以此处留下记录以备后用，文章中的思路不一定是最佳的，姑且算是个抛砖引玉。</p><h2 id="一、Pjax-加速的原理">一、Pjax 加速的原理</h2><p>  在进入正文之前，我们先简单的了解：<strong>单页应用</strong>（英语：single-page application，缩写<strong>SPA</strong>）是一种网络应用程序或网站的模型，它通过动态重写当前页面来与用户交互，而非传统的从服务器重新加载整个新页面。这种方法避免了页面之间切换打断用户体验，使应用程序更像一个桌面应用程序。<strong>与单页应用的交互通常涉及到与网页服务器后端的动态通信</strong>。说白了也就是通过 <code>pushState() + XHR</code> 技术实现的页面切换。</p><p>  而 Hexo 站点本身是个静态页面，无法发出动态请求，所以这里便引出了本文的主角 Pjax 框架了。其思路是通过拦截 <code>a</code> 链接，发送 XHR 请求，获取下级页面内容，接着替换指定区域完成整个过程。由于不是动态网站，Pjax 在请求过程中获取的是整个站点的 Html 内容，所以请求本身是无法达到加速的，但是可以减少页面中 JS 文件的重复请求，此外还可以利用一些预加载技术（预读缓存）和磁盘缓存进一步提升访问速度，实际体验效果是极佳的。</p><h2 id="二、前期的准备工作">二、前期的准备工作</h2><p>  正如前文中所说，在一次 Pjax 请求获取完整的 html 过程中，从获取到的结果中找到选中的内容替换到页面里，所以我们需要先划分页面结构，确定被替换的区域。</p><h3 id="2-1-分析网站布局">2.1 分析网站布局</h3><p>  一个网站的内容有什么？对于 Hexo 这类静态博客来说，网站内容是根据模板文件生成的，其中存在着大量共有的元素。大概上可以划分成这几部分：<em>导航栏</em>、<em>文章部分</em>、<em>侧边栏</em>、<em>页脚</em>。在这些区域中，潜在的重复内容是 <strong>导航栏</strong> 和 <strong>页脚</strong> ，一般来说文章区域和侧边栏区域是不会相同的，那么对应到 Hexo 主题里，这部分是由 <code>layout.ejs</code> 文件控制的。我们找到核心部分，去除掉无用的干扰项后分析一番：</p><details ><summary class="not-select"> <p>一个简单的页面分析</p> </summary>              <div class='content'>              <figure class="highlight html"><figcaption><span>以本主题的样式文件为例</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>(&#x27;<span class="attr">_partial</span>/<span class="attr">head</span>&#x27;) %&gt;</span>                             // 加载 head 标签</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>(&#x27;<span class="attr">_partial</span>/<span class="attr">cover</span>&#x27;, &#123;<span class="attr">showCover:</span> <span class="attr">showCover</span>&#125;) %&gt;</span>  // 加载导航栏</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;l_body&lt;%- showCover ? &#x27;&#x27; : &#x27; nocover&#x27; %&gt;&quot;</span>&gt;</span>    // 加载封面</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;body-wrapper&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">%-</span> <span class="attr">body</span> %&gt;</span>                                           // 页面内容主体</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>(&#x27;<span class="attr">_partial</span>/<span class="attr">scripts</span>&#x27;) %&gt;</span>                        // 引入 js 文件</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>              </div>            </details><p>  由此可知，页面中变动的部分都位于 <code>&lt;%- body %&gt;</code> 这个标签中了，那么它就是目标了，在 <code>class='body-wrapper'</code> 后面添加 <code>id=&quot;pjax-container&quot;</code> 以方便选中元素。</p><h3 id="2-2-Pjax-的配置项">2.2 Pjax 的配置项</h3><p>  详细的文档可在项目的 readme 中查看，传送链接：<a href="https://github.com/MoOx/pjax/blob/master/README.md">Pjax Document</a>。</p><p>  在正式使用 Pjax 之前，需要先添加它的 js 文件，位置上没那么讲究，Mox 的 Pjax 去除了对 Jquery 的依赖，但别放到重载区域内。Pjax 的初始化写法与 jquery-pjax 不完全相同，可以类似这样子写：</p><figure class="highlight js"><figcaption><span>Pjax 初始化函数</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pjax = <span class="keyword">new</span> Pjax(&#123;</span><br><span class="line">    elements: <span class="string">&#x27;a[href]:not([href^=&quot;#&quot;]):not([href=&quot;javascript:void(0)&quot;])&#x27;</span>,   <span class="comment">// 拦截正常带链接的 a 标签</span></span><br><span class="line">    selectors: [<span class="string">&quot;#pjax-container&quot;</span>,<span class="string">&quot;title&quot;</span>]                                   <span class="comment">// 根据实际需要确认重载区域</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>  这里共配置了两部分，<strong>选择器（selectors）</strong> 和 <strong>元素 （elements）</strong> 。默认情况下 pjax 处理的元素为 <code>a[href], form[action]</code> ，但是并不是所有的 <code>&lt;a&gt;</code> 标签都可追踪，所以使用 <code>:not</code> 语法排除一些不需要使用 pjax 跳转的元素；接着是选择器（class 或 id 选择都行），选择器用以选定重载的范围，个人理解为在 <strong>指定标签内的内容</strong>，在跳转页面时均被替换，不在这个范围内的不做处理。</p><p>  除此之外，我们还有三个相对重要的 Pjax 事件函数可以使用：</p><figure class="highlight js"><figcaption><span>比较有用的 Pjax 函数</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:send&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:complete&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:error&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure><h3 id="2-3-一些潜在的问题">2.3 一些潜在的问题</h3><p>  至此，我们已经完成了引入 Pjax 文件，划定重载区域，初始化 Pjax 对象，是不是一切就高枕无忧了呢？当然，答案是否定的。这里可以引用一句古老的名言 ”大人，时代变了！”，当下的网站早已不是个孤零零的产物，而是和 Javascript 有着密切联系后的动态页面，存在着大量的事件监听处理。不巧的是在替换内容时，部分事件监听丢失了，异常、错误、功能失效等等，就愉快的上演了。</p><p>  Javascript 部分自然是需要重新绑定注册的，但是是不是无脑全部重新绑定就行呢？答案也是否定的，我们会有个大敌：<strong>重复事件监听</strong>，它或许不会立即爆发危害，但是随着浏览页面的增加，事件绑定可能会越来越累加，影响效率，潜在造成错误等等。所以这里就需要利用 <code>send</code> 和 <code>complete</code> 这对事件了，合理利用，正确解决问题。</p><h2 id="三、后期的兼容处理">三、后期的兼容处理</h2><h3 id="3-1-几种兼容思路">3.1 几种兼容思路</h3><p>  首先，是一些需要每次进入页面，都必须重新加载的 JS 文件，典型的有不蒜子网页计数、各类分析脚本，自然而然他们必须要多次加载，对于这类的操作，简单的处理方案就是在引入相关 js 文件时，加入格外的属性，如 <code>data-pjax</code> ，统一处理具有这个属性的 JS 文件，在跳转页面时重新导入（以不蒜子为例子）：</p><details ><summary class="not-select"> <p>JS 文件整体重载</p> </summary>              <div class='content'>              <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span> data-pjax&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;pjax:complete&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&#x27;script[data-pjax], .pjax-reload script&#x27;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="built_in">this</span>).parent().append($(<span class="built_in">this</span>).remove());</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>              </div>            </details><p>  另一种情况是，引入的 JS 文件无需重复导入，但是绑定的函数需要重新处理，比如 Fancybox 这类弹窗，这类的可以写在函数里，在页面加载完成后 <code>$(document).ready(function()&#123;&#125;)</code> 和 Pjax 重载完成后重新调用，比如本站的 Fancybox 初始化函数：</p><details ><summary class="not-select"> <p>Js 函数重载（以 Fancybox 为例）</p> </summary>              <div class='content'>              <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pjax_fancybox</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="string">&quot;.article-entry&quot;</span>).find(<span class="string">&quot;img&quot;</span>).not(<span class="string">&#x27;.inline&#x27;</span>).not(<span class="string">&#x27;a img&#x27;</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//渲染 fancybox</span></span><br><span class="line">    <span class="keyword">var</span> element = <span class="built_in">document</span>.createElement(<span class="string">&quot;a&quot;</span>); <span class="comment">// a 标签</span></span><br><span class="line">    $(element).attr(<span class="string">&quot;pjax-fancybox&quot;</span>, <span class="string">&quot;&quot;</span>);  <span class="comment">// 过滤 pjax</span></span><br><span class="line">    $(element).attr(<span class="string">&quot;href&quot;</span>, $(<span class="built_in">this</span>).attr(<span class="string">&quot;src&quot;</span>));</span><br><span class="line">    <span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&quot;data-original&quot;</span>)) &#123;</span><br><span class="line">      $(element).attr(<span class="string">&quot;href&quot;</span>, $(<span class="built_in">this</span>).attr(<span class="string">&quot;data-original&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    $(element).attr(<span class="string">&quot;data-fancybox&quot;</span>, <span class="string">&quot;images&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> caption = <span class="string">&quot;&quot;</span>;   <span class="comment">// 描述信息</span></span><br><span class="line">    <span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&#x27;alt&#x27;</span>)) &#123;  <span class="comment">// 判断当前页面是否存在描述信息</span></span><br><span class="line">      $(element).attr(<span class="string">&#x27;data-caption&#x27;</span>, $(<span class="built_in">this</span>).attr(<span class="string">&#x27;alt&#x27;</span>));</span><br><span class="line">      caption = $(<span class="built_in">this</span>).attr(<span class="string">&#x27;alt&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">    $(div).addClass(<span class="string">&quot;fancybox&quot;</span>);</span><br><span class="line">    $(<span class="built_in">this</span>).wrap(div); <span class="comment">// 最外层套 div ，其实主要作用还是 class 样式</span></span><br><span class="line">    <span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">&quot;span&quot;</span>);</span><br><span class="line">    $(span).addClass(<span class="string">&quot;image-caption&quot;</span>);</span><br><span class="line">    $(span).text(caption); <span class="comment">// 加描述</span></span><br><span class="line">    $(<span class="built_in">this</span>).after(span);  <span class="comment">// 再套一层描述</span></span><br><span class="line">    $(<span class="built_in">this</span>).wrap(element);  <span class="comment">// 最后套 a 标签</span></span><br><span class="line">  &#125;)</span><br><span class="line">  $(<span class="string">&quot;.article-entry&quot;</span>).find(<span class="string">&quot;img&quot;</span>).fancybox(&#123;</span><br><span class="line">    selector: <span class="string">&#x27;[data-fancybox=&quot;images&quot;]&#x27;</span>,</span><br><span class="line">    hash: <span class="literal">false</span>,</span><br><span class="line">    loop: <span class="literal">false</span>,</span><br><span class="line">    closeClick: <span class="literal">true</span>,</span><br><span class="line">    helpers: &#123;</span><br><span class="line">      overlay: &#123;<span class="attr">closeClick</span>: <span class="literal">true</span>&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    buttons: [</span><br><span class="line">      <span class="string">&quot;zoom&quot;</span>,</span><br><span class="line">      <span class="string">&quot;close&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>              </div>            </details><p>  Fancybox 在每一页重新绑定，同类的代码都可以采用以上的处理方式。需要重新加载的整个 JS 文件的就单独重载，需要重新执行绑定函数的，就在 Pjax 的事件监听函数中重新调用。</p><h3 id="3-2-文章独有的变量">3.2 文章独有的变量</h3><p>  这里的变量是指那种写在头部的变量，他们在页面上不存在（发挥在 Hexo 的渲染阶段）。典型例子为本主题的评论部分的配置，这部分基本位于 <code>scripts.ejs</code> 文件中，当读取相应的配置属性时，从主题配置文件读取的也还好，毕竟无需在意变动的问题，麻烦就麻烦在从文章页面中读取的属性。</p><p>  比如评论的占位符和地址的自定义，渲染阶段所产生的结果在页面经过 Pjax 局部重载后拿不到。所以这里换个思路，将一些变量藏在文章区域内，在使用时通过元素选择器调用。</p><h2 id="四、后记">四、后记</h2><h3 id="4-1-参考链接">4.1 参考链接</h3><p>吃水不忘挖井人，除 Pjax 的官方网站外，另外两个站点也对我的帮助很大，这里予以记录：</p><ul><li>来自 liuyib 的 <a href="https://liuyib.github.io/2019/09/24/use-pjax-to-your-site/">集成 Pjax 实现网站无刷新加载</a> 。</li><li>相同主题下的另一个 Pjax 部署思路：<a href="https://sxyugao.top/">YuGao’s Blog</a> 。</li></ul><h3 id="4-2-本页面的独特修改">4.2 本页面的独特修改</h3><p>   因为文章的代码不出预料的会很多，所以萌生了使用折叠框的念头，在不改动渲染器的情况下，采取了直接写 html 代码的思路。<s>但是未曾想到折叠框在伸缩、展开的过程中，因改变了页面高度的缘故影响到目录导航栏的激活跟随，思索了一阵子后没发现较好的解决办法，特此记录，代办代办（<em>有想法的小伙伴也可以留言啊，或者有更好的代码块折叠方案什么的</em>）。</s></p><p>   <em>主题已原生支持。</em></p><h3 id="4-3-功能性测试">4.3 功能性测试</h3><p class='p center logo large'><i class="fal fa-narwhal"></i></p><p class='p center logo large'>Volantis</p><p class='p center small'>A Wonderful Theme for Hexo</p><h4 id="4-3-1-Tab">4.3.1 Tab</h4><div class="tabs" id="tab-id"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab-id-1">失落的宇宙</a></li><li class="tab"><a href="#tab-id-2">背景介绍</a></li><li class="tab"><a href="#tab-id-3">豆瓣评价</a></li><li class="tab"><a href="#tab-id-4">相关图片</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-id-1"><p>  《失落的宇宙》（日文名：ロスト・ユニバース，LOST UNIVERSE，大陆译名： 宇宙刑警）是神坂一原著的日本科幻小说。亦改编成漫画与动画。小说版共5卷，漫画版共4册。动画版1998年4月3日发行，总共26集。</p></div><div class="tab-pane" id="tab-id-2"><p>  在远古的时代，宇宙中存在着分别代表光明与黑暗的两个文明，正如光与影永远是相互矛盾的，两个文明也长年处于战争之中，代表黑暗的文明为了取得胜利，就制造了一种高科技的战舰，这种战舰拥有超强的作战能力及穿越时空的能力，而且，还拥有自己的思想。然而，<strong>这种战舰却会把驾驶者作为自己的食粮</strong>，以此来增强自己的力量。<br>  这种黑色的战舰就像魔鬼一样，会把敌人彻底毁灭，但同时也会吞噬驾驶员的生命。而在同一时间，为了对抗敌人的黑色战舰，代表光明的文明也创造了一艘白色战舰与黑色战舰抗衡。后来，两个文明都原因不明地消失了，而那些战舰却依然存在在宇宙的某个角落里，新时代的人为他们起了个名字——遗失战舰（LostShips）</p></div><div class="tab-pane" id="tab-id-3"><p>  小时候在电视台看动画片《宇宙刑警》（失落的宇宙），结局是男主角去敌窝生死未卜，女主角回复了平静的生活等待他回来。电视里没放完就插了广告，最后一集看的这么多年一直耿耿于怀，我想知道他是否平安回来。昨天终于偶然间看到了最后一集，老牌怀旧的硬朗画风和人物设定，她在风和日丽的天气里晒洁白的被单，去他的墓前放一束花，突然看到他的宇宙飞船缓缓降落，这么多年的等待终于有了结果。于是我这么多年的等待也有了结果。<br>  然而这是动画，所以就在美好的这一刻打住。现实中也许宇宙飞船上早已物是人非，躺着他的尸体残骸也说不一定。得不到和已失去，总是在二者中间的状态才是最好。 —— honey</p></div><div class="tab-pane" id="tab-id-4"><img fancybox class="img lazyload" src="https://img.inkss.cn/szyink_com/typecho/2019/10/04/1570189514.jpg" class="lazyload" data-srcset="https://img.inkss.cn/szyink_com/typecho/2019/10/04/1570189514.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div></div></div><h4 id="4-3-2-Folding">4.3.2 Folding</h4><details ><summary class="not-select"> <p>查看图片测试</p> </summary>              <div class='content'>              <p><img fancybox src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt=""></p>              </div>            </details><details cyan open><summary class="not-select"> <p>查看默认打开的折叠框</p> </summary>              <div class='content'>              <p>这是一个默认打开的折叠框。</p>              </div>            </details><details red><summary class="not-select"> <p>查看嵌套测试</p> </summary>              <div class='content'>              <details blue><summary class="not-select"> <p>查看嵌套测试2</p> </summary>              <div class='content'>              <details ><summary class="not-select"> <p>查看嵌套测试3</p> </summary>              <div class='content'>              <p>多级嵌套，又称套娃~</p>              </div>            </details>              </div>            </details>              </div>            </details><h4 id="4-3-3-Checkbox-Radio">4.3.3 Checkbox &amp; Radio</h4><div class="tabs" id="tab-id"><ul class="nav-tabs not-select"><li class="tab active"><a href="#tab-id-1">Checkbox</a></li><li class="tab"><a href="#tab-id-2">Radio</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-id-1"><div class='checkbox'><input type="checkbox" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>支持自定义颜色</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>绿色 + 默认选中</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>增加</p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>减少</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>叉</p>            </div></div><div class="tab-pane" id="tab-id-2"><div class='checkbox'><input type="radio" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>            </div><div class='checkbox red'><input type="radio" />            <p>支持自定义颜色</p>            </div><div class='checkbox green'><input type="radio" />            <p>绿色</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>黄色</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>青色</p>            </div><div class='checkbox blue'><input type="radio" />            <p>蓝色</p>            </div></div></div></div>]]></content>
    
    
    <summary type="html">本篇定位于理论知识，概述性简介如何处理 Pjax 与 Hexo 的兼容过程。</summary>
    
    
    
    <category term="博客" scheme="https://inkss.cn/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="Hexo" scheme="https://inkss.cn/tags/Hexo/"/>
    
    <category term="Pjax" scheme="https://inkss.cn/tags/Pjax/"/>
    
  </entry>
  
  <entry>
    <title>猫之三千岁：网站状态概述</title>
    <link href="https://inkss.cn/blog/b0e91f3f/"/>
    <id>https://inkss.cn/blog/b0e91f3f/</id>
    <published>2019-07-22T11:27:00.000Z</published>
    <updated>2020-05-12T11:27:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、起始">一、起始</h2><p>万物皆有起源，本站的起始则是从 2018年11月 开始。谈及最初建个人网站的经历，大概在大一下的时候就开始了，不过当时选择的并不是 Hexo ，而是使用了很著名的一个博客系统：WordPress 。它简直是新手入门的不二之选呀，从购买服务器，到搭建服务器运行环境，再到购买域名，各类网站解析什么的，一种套流程下来，虽然各种懵逼，但是重在折腾呀。再后来，对 WordPress 的乐趣转向它的插件、主题上，各种主题、插件的尝试更换等等，现在想来有些本末倒置了。最后，因为没有对服务器/域名进行续费，第一个网站就荒废了。留念一下：<em>域名</em> ：<code>sunziy.cn</code> ，<em>站名</em> ：<code>不停</code> 。</p><p>后来的很长一段时间内，没有再接触过网站了，期间有对 Hexo 了解过一阵子，但也只是仅限了解，没有细致的尝试。就这样一直到了大三下，在制作简历的时候，认为网站会是一个加分项，边着手重新搭建一个。因为追求轻量化，那么作为静态博客的 Hexo 便是首选了。</p><blockquote><p>维基百科中有言，古埃及人早在 3600 年前，便有驯养猫的历史，故曰猫之三千六百岁。</p></blockquote><h2 id="二、轻量简约">二、轻量简约</h2><p>静态博客无需 WEB 服务器做处理，这样整个网站的开支降到一个极为节俭的程度。简单的罗列下本网站的开支吧：</p><ul><li>域名：cn 域名 35/年。</li><li>存储：Github 免费；腾讯云对象存储 0.13/G。</li><li>访问：Github 免费；腾讯云对象存储 0.5/G。</li><li>分发：腾讯云对象存储 CDN 0.15/G。</li></ul><p>事实上，对于一个小站，除了域名开支，很少会用到付费部分。</p><p>毕竟，<strong>网站的真正的开支大头是云服务器呀</strong>。</p><h2 id="三、环境">三、环境</h2><p>Hexo 是需要 Node.js 环境的，而且个人对网站主题文件也做了一些修改，甚至部分插件也有改动，使用 <code>npm install --save</code> 安装插件的话，很是影响网站结构。</p><p>所以，后来，干脆在 Github 建立一个私有仓库，将整个 Hexo 目录连带着插件文件一并打包上传。这样子起码解决了网站内容的问题，但是 Hexo 所需环境还是个麻烦，Linux 还好，Windows 下无论是搭建还是终端下命令的使用都很难受，但是山重水复疑无路，柳暗花明又一村。</p><p>我发现了腾讯云开发者平台，这个平台在很早之前就存档，当时远远没有现在的易用性，多个版本的迭代后，Cloud Studio 使用体验上是非常的优秀，如你所见，整个编辑界面，应该是改自 Visual Studio Code 。最后提及一句，它相当于为你提供了一个免费的 Linux 服务器，做一些编辑之类的真的是很赞呀，可以让你随时随地修并提交网站内容。</p>]]></content>
    
    
    <summary type="html">本网站的状态：万物皆有起源，本站的起始则是从 2018年11月 开始。谈及最初建个人网站的经历，大概在大一下的时候就开始了，不过当时选择的并不是 Hexo ，而是使用了很著名的一个博客系统：WordPress ...</summary>
    
    
    
    <category term="博客" scheme="https://inkss.cn/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="网站" scheme="https://inkss.cn/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="Hexo" scheme="https://inkss.cn/tags/Hexo/"/>
    
    <category term="Cloud Studio" scheme="https://inkss.cn/tags/Cloud-Studio/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 18.04 安装笔记</title>
    <link href="https://inkss.cn/blog/c6df61d3/"/>
    <id>https://inkss.cn/blog/c6df61d3/</id>
    <published>2019-04-08T23:10:00.000Z</published>
    <updated>2020-05-10T10:42:00.000Z</updated>
    
    <content type="html"><![CDATA[<!-- ![Ubuntu 18.04 安装配置和美化](https://img.inkss.cn/inkss/static/Ubuntu18.04安装记录.assets/image-20200507105832915.png) --><br><p class='p center logo ultra'><i class="fab fa-linux"></i></p><p class='p center logo large'>Ubuntu 18.04</p><p class='p center logo small gray'>安装配置和美化</p><br><br><hr><details cyan><summary class="not-select"> <p>文章更新日志</p> </summary>              <div class='content'>              <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">2019.04.28</span><br><span class="line">  + 重构文章，修改并调整内容。</span><br><span class="line">  + 补充来源链接，方便时效性内容的验证。</span><br><span class="line">2019.07.29</span><br><span class="line">  + 更正 Shell 的安装命令。</span><br><span class="line">  + 解决下载速度慢的小工具。</span><br><span class="line">  - 删除所有配图。</span><br><span class="line">2020.05.07</span><br><span class="line">  + 添加原来的配图（整理的时候，发现当初的桌面还怪好看的，容我置顶得瑟会儿）</span><br></pre></td></tr></table></figure>              </div>            </details><hr><h2 id="一、安装操作系统">一、安装操作系统</h2><h3 id="1-1-引导盘">1.1 引导盘</h3><ul><li><p>刻录进光盘：</p><ul><li>使用 <em><a href="https://www.ultraiso.com/download.html">UltraISO</a></em> 对镜像文件进行刻录，同时存在 Legacy , UEFI 两种引导项，需通过 UEFI 形式读入光盘。</li></ul></li><li><p>刻录进 U 盘：</p><ul><li><p><strong>方案一：解压镜像文件</strong> 【<strong>推荐</strong>】</p><p>将 U 盘格式化为 <strong>FAT32</strong> ，然后解压操作系统的镜像文件至 U 盘根目录，完成 “刻录” 。</p></li><li><p>方案二：使用刻录工具</p><p>利用软件 <em><a href="https://rufus.akeo.ie/?locale=zh_CN">Rufus</a></em> 完成镜像刻录。</p></li></ul></li></ul><blockquote><p>刻录 Windows PE 系统，如“微 PE”可以选择三分区，也就是引导一个分区，PE 一个分区，U 盘剩余空间一个分区；而如果利用方案一的解压方式，那么 U 盘将被识别出两个引导，Windows &amp; Linux 。</p></blockquote><h3 id="1-2-分区">1.2 分区</h3><p>分区，也就是提前为 Ubuntu 系统划分空间，这一步可以在 Windows 下进行，也可以在安装操作系统时进行。</p><p>Linux 系统的分区只建议划分根 <code>/</code> 和家目录 <code>/home</code> ，如此系统文件与个人文件分离，最大程度的保留数据。</p><p>交换分区：建议使用 swap 文件代替 swap 分区，削减多余的分区。</p><h3 id="1-3-安装系统">1.3 安装系统</h3><p>一些注意事项：</p><ul><li>硬盘格式：GPT ；引导类型：UEFI 。</li><li>单系统用户，务必准备一个 <strong>EFI (ESP)</strong> 分区，否则无法写入 Grub 引导。</li><li>安装过程中建议勾选 <strong>最小安装</strong> 、 <strong>安装 Ubuntu 时下载更新</strong> 和 <strong>为图形或无线硬件安装第三方软件</strong> 。</li><li>关于下载速度的问题：如无合适的解决方案，可安装系统换源后再进行下载操作。</li></ul><hr><h2 id="二、开箱即用的操作系统">二、开箱即用的操作系统</h2><blockquote><p>遗憾的是，Ubuntu 的开箱体验并不优秀，不过好在配置过程也不复杂，完成 2.1 和 2.3 便差不多可用了 。</p><p>本节按照线性顺序进行，虽然实际安装过程中，限于网速多半会先安装 Chrome 和 Clash （相关内容位于第三节）。此外操作系统中自带的火狐浏览器为国际版，而非国内谋智代理的火狐，两者账户不互通。</p></blockquote><h3 id="2-1-第一次重启前">2.1 第一次重启前</h3><h4 id="2-1-1-完成第一次更新">2.1.1 完成第一次更新</h4><p>先移步到 <strong>所有软件 (Win + A)<strong>→</strong>软件更新器</strong> ，等待系统完成更新。（其实等待一会儿会自动弹出的）</p><p>接着移步到 <strong>所有软件</strong>→<strong>设置</strong>→<strong>区域和语言</strong>→<strong>管理已安装的语言</strong> ，完成语言列表的更新。</p><h4 id="2-2-2-转移备份文件">2.2.2 转移备份文件</h4><p>在选择重启操作系统前，拷贝文件到新系统中（如果存在的话）。</p><h4 id="2-2-3-解决双系统时差问题">2.2.3 解决双系统时差问题</h4><p>Windows + Linux 需求用户可以使用以下代码在终端中执行解决此问题。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl <span class="built_in">set</span>-local-rtc 1 --adjust-system-clock</span><br></pre></td></tr></table></figure><h4 id="2-2-4-替换-Shell">2.2.4 替换 Shell</h4><p>不得不说，有一个智能的补全能力强大的终端还是非常有必要的，二选一。</p><p>(a). <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install git</span><br><span class="line">sudo apt install zsh</span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(wget -O- https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line">chsh -s /usr/bin/zsh</span><br></pre></td></tr></table></figure><p>(b). <a href="https://launchpad.net/~fish-shell/+archive/ubuntu/release-3">fish</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-add-repository ppa:fish-shell/release-3</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install fish</span><br><span class="line">chsh -s /usr/bin/fish</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> fish_greeting </span><br><span class="line">fish_config</span><br></pre></td></tr></table></figure><h4 id="2-2-5-终端下的包安装器">2.2.5 终端下的包安装器</h4><p>相比于图形界面 ，在终端下安装 deb 包可以获得更多的信息提示，但是使用 <code>dpkg</code> 命令又无法自动解决依赖问题，这里可以使用 <code>gdebi</code> 安装器解决此问题。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gdebi</span><br></pre></td></tr></table></figure><h3 id="2-2-换一套主题">2.2 换一套主题</h3><blockquote><p>此节是为伸手党准备的，详细的内容可参见 <code>2.3 主题自定义</code> （新手可以不必去看）。</p><p>可以通过本节内容快速完成主题方面的修改，注：<code>gnome-shell-extensions</code> 是一些常用扩展的集合，如 User Themes 等（事实上它可以在应用商店里搜索安装）。</p></blockquote><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507105957944.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507105957944.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="外观配置">  <figcaption>外观配置</figcaption></figure></p><h4 id="2-2-1-系统主题-Sieera">2.2.1 系统主题 Sieera</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:dyatlov-igor/sierra-theme</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install sierra-gtk-theme       <span class="comment"># point releases</span></span><br><span class="line">sudo apt install sierra-gtk-theme-git   <span class="comment"># git master branch</span></span><br></pre></td></tr></table></figure><ul><li>相关链接：<a href="https://github.com/vinceliuice">vinceliuice</a>/<a href="https://github.com/vinceliuice/Sierra-gtk-theme">Sierra-gtk-theme</a></li></ul><h4 id="2-2-2-应用图标-suru-plus">2.2.2 应用图标 suru-plus</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://raw.githubusercontent.com/gusbemacbe/suru-plus/master/install.sh | env DESTDIR=<span class="string">&quot;<span class="variable">$HOME</span>/.icons&quot;</span> sh</span><br></pre></td></tr></table></figure><ul><li>相关链接：<a href="https://github.com/gusbemacbe">gusbemacbe</a>/<a href="https://github.com/gusbemacbe/suru-plus">suru-plus</a></li></ul><h4 id="2-2-3-Grub-引导主题-Fallout">2.2.3 Grub 引导主题 Fallout</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O - https://github.com/shvchk/fallout-grub-theme/raw/master/install.sh | bash</span><br></pre></td></tr></table></figure><ul><li>相关链接：<a href="https://github.com/shvchk">shvchk</a>/<a href="https://github.com/shvchk/fallout-grub-theme">fallout-grub-theme</a></li></ul><h4 id="2-2-4-鼠标光标-oxy-blue">2.2.4 鼠标光标 oxy-blue</h4><ul><li>下载 <a href="https://www.opendesktop.org/p/1274872/">oxy-blue.zip</a>，解压文件到：<code>~/.icons</code> 。</li></ul><h4 id="2-2-5-文泉驿字体">2.2.5 文泉驿字体</h4><ul><li><p>文泉驿字体 微米黑/正黑：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install fonts-wqy-microhei fonts-wqy-zenhei</span><br></pre></td></tr></table></figure></li><li><p>终端字体 powerline ：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install fonts-powerline</span><br></pre></td></tr></table></figure></li></ul><h4 id="2-2-6-优化工具">2.2.6 优化工具</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gnome-tweak-tool</span><br><span class="line">sudo apt install gnome-shell-extensions</span><br></pre></td></tr></table></figure><ul><li>然后，从应用列表中打开一个名为 <strong>优化</strong> 的软件，在扩展中启用 “ User Themes ”；</li></ul><blockquote><p>在外观中修改：应用程序、光标、图标和 Shell 就大功告成了，最后不要忘记换一个赏心悦目的桌面背景。</p></blockquote><h4 id="2-2-7-输入法和-Dock">2.2.7 输入法和 Dock</h4><ul><li>参阅 2.3 部分的相关内容。</li></ul><h3 id="2-3-主题自定义">2.3 主题自定义</h3><blockquote><p>主题自定义中共包含 6 个部分，涉及 2.2 中各项具体的解释。</p></blockquote><h4 id="2-3-1-Gnome-tweak-tool">2.3.1 Gnome-tweak-tool</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install gnome-tweak-tool</span><br></pre></td></tr></table></figure><p>移步到 <strong>所有软件</strong>→<strong>Ubuntu 软件</strong>→<strong>附加组件</strong> ，在此处安装相应的 Shell 组件（或者参考 3.2 节）。</p><blockquote><p>为了自定义 Shell 主题（加载本地文件），需要安装、启用插件：<em>User Themes</em> 。</p></blockquote><h4 id="2-3-2-主题-图标-字体">2.3.2 主题 图标 字体</h4><p>安装目录有两种，区别上类似于 Windows 环境变量里的个人和系统。</p><ol><li>主题存放目录：<code>/usr/share/themes</code> 或 <code>~/.themes</code></li><li>图标存放目录：<code>/usr/share/icons</code> 或 <code>~/.icons</code></li><li>字体存放目录：<code>/usr/share/fonts</code> 或 <code>~/.fonts</code></li></ol><p>其中 <em>/usr/share</em> 目录需要 root 权限才能修改，可以对文件管理提权后打开：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nautilus</span><br></pre></td></tr></table></figure><h4 id="2-3-3-Grub-启动项主题">2.3.3 Grub 启动项主题</h4><p>主题包地址：<a href="https://www.gnome-look.org/browse/cat/109/order/latest">Gnome Look - GRUB Themes</a> （自行挑选喜欢的）</p><p><strong>(a)</strong> <strong>手写配置文件</strong></p><p>安装步骤 ：首先下载主题包，多为压缩包，解压出文件。使用 <code>sudo nautilus</code> 打开文件管理器。</p><p>定位到目录：<code>/boot/grub</code>，在该目录下 <strong>新建文件夹</strong> ：<code>themes</code>，将解压出的文件拷贝到文件夹中。</p><p>接着（终端下）使用 gedit 修改 <em>grub</em> 文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/default/grub</span><br></pre></td></tr></table></figure><p>在该文件末尾添加：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GRUB_THEME=&quot;/boot/grub/themes/主题包文件夹名称/theme.txt&quot;</span></span><br><span class="line">GRUB_THEME=<span class="string">&quot;/boot/grub/themes/fallout-grub-theme-master/theme.txt&quot;</span></span><br></pre></td></tr></table></figure><p>更新配置文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure><p><strong>(b)</strong> <strong>利用软件 Grub Customizer</strong> 【<strong>推荐</strong>】</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:danielrichter2007/grub-customizer</span><br><span class="line">sudo apt install grub-customizer</span><br></pre></td></tr></table></figure><p>可使用该软件定制 Grub ，如修改启动项名称，<strong>默认启动改为上一次启动项</strong> 。</p><ul><li>相关链接：<a href="https://launchpad.net/~danielrichter2007/+archive/ubuntu/grub-customizer">Launchpad PPA for Grub Customizer</a></li></ul><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110107616.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110107616.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Grub Customizer">  <figcaption>Grub Customizer</figcaption></figure></p><h4 id="2-3-4-GDM-登录背景图">2.3.4 GDM 登录背景图</h4><p>更换登录界面的背景图需要修改 <code>ubuntu.css</code>，它位于 <code>/usr/share/gnome-shell/theme</code> 。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /usr/share/gnome-shell/theme/ubuntu.css</span><br></pre></td></tr></table></figure><p>在文件中找到关键字 <code>lockDialogGroup</code>，如下行：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#lockDialogGroup &#123;</span></span><br><span class="line">   background: <span class="comment">#2c001e url(resource:///org/gnome/shell/theme/noise-texture.png);</span></span><br><span class="line">   background-repeat: repeat; &#125;</span><br></pre></td></tr></table></figure><p>修改图片路径即可，样例如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#lockDialogGroup &#123;</span></span><br><span class="line">background: <span class="comment">#2c001e url(file:///home/inkss/APP/ink_img/img.jpg);</span></span><br><span class="line">   background-repeat: no-repeat;</span><br><span class="line">   background-size: cover;</span><br><span class="line">   background-position: center; &#125;</span><br></pre></td></tr></table></figure><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110222935.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110222935.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="GDM">  <figcaption>GDM</figcaption></figure></p><h4 id="2-3-5-输入法-中州韵和搜狗">2.3.5 输入法 中州韵和搜狗</h4><blockquote><p>首先，默认状态下 Ubuntu 的中文输入法属于可用但不完全好用的状态，这里记录两类输入法，二选一。</p></blockquote><p>(a) <strong>中州韵输入法</strong></p><p>前置提醒：中州韵没有 GUI 界面，只能通过配置文件进行定制，需要一定的研究能力。</p><p>基于 IBus 框架的中州韵（默认为此框架）：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ibus-rime</span><br></pre></td></tr></table></figure><ul><li>相关链接：<a href="https://github.com/rime/home/wiki/RimeWithIBus">ibus-rime</a></li></ul><p>(b) <strong>搜狗输入法</strong></p><p>搜狗基于 Fcitx 输入框架，默认没有安装，需要先安装框架：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install fcitx</span><br></pre></td></tr></table></figure><p>去 <a href="https://pinyin.sogou.com/linux/?r=pinyin">搜狗输入法官网</a> 下载输入法安装包安装：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gdebi xxxxxx.deb</span><br></pre></td></tr></table></figure><p>然后移步到 <strong>设置</strong>→<strong>区域和语言</strong> ，删除一部分输入源，只保留汉语，接着选择 <strong>管理已安装的语言</strong> ，修改 <em>键盘输入法系统</em> 为 <strong>fcitx</strong> 。关闭窗口，打开所有程序，选择软件  <strong>Fcitx 配置</strong> ，选择加号添加搜狗输入法。</p><blockquote><p>如果没有找到搜狗，就重启系统，再次重复以上步骤即可。（多半找不到，呱）</p><p>推荐一个搜狗输入法皮肤：<a href="https://pinyin.sogou.com/skins/detail/view/info/519557?rf=subject_jjzq&amp;tf=p">简约-信</a> 。</p><p>PS：两个输入法可以共存。</p></blockquote><h4 id="2-3-6-Dock-Docky">2.3.6 Dock - Docky</h4><p>一个第三方 Dock 软件，颜值上比 Ubuntu 自带 Dock 好了些许。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install docky</span><br></pre></td></tr></table></figure><ul><li>【可选】如何 <a href="https://my.oschina.net/ic4907/blog/158747"><em>去掉 Docky 第一个图标</em></a></li></ul><p>在 <strong>Ubuntu SoftWare</strong> 中搜索 <em>Configuration Editor</em> ，安装后打开软件，定位到：</p><p><strong><code>/apps/docky-2/Docky/Items/DockyItem</code></strong></p><p>取消 <em>ShowDockyItem</em> 的勾选状态（决定是否显示 第一个 Docky）</p><hr><h2 id="三、后续完善">三、后续完善</h2><blockquote><p>此节内容可跳跃观看，仅供参考，<strong>合理辨认内容是否过时</strong>。</p></blockquote><h3 id="3-1-DeepinWine-Wine-QQ">3.1 DeepinWine Wine QQ</h3><p>首先需要在本机下载 Deepin-Wine 环境：<a href="https://github.com/wszqkzqk/deepin-wine-ubuntu"><strong>deepin-wine-ubuntu</strong></a></p><p>克隆或下载压缩包到本机，<strong>解压后</strong> 在终端目录下执行命令：<code>./install.sh</code> 安装环境。</p><p>容器下载地址：<a href="http://mirrors.aliyun.com/deepin/pool/non-free/d/">Index of /deepin/pool/non-free/d/</a> ，使用方法见仓库中的 <a href="https://github.com/wszqkzqk/deepin-wine-ubuntu/blob/master/README.md">ReadMe</a> 文件。</p><blockquote><p><strong>关于托盘</strong>：安装 <em>TopIconPlus</em> 的 gnome-shell 扩展。</p><p>然后在所有软件中找到 <strong>优化 (Gnome-tweak-tool)</strong> ，在扩展中打开 <em>Topicons plus</em> 。</p></blockquote><h3 id="3-2-Gnome-扩展">3.2 Gnome 扩展</h3><p>获取扩展的方法很多：终端命令，软件中心下载，浏览器下载等，这里主要介绍浏览器下载。</p><p>首先安装 Gnome Shell ：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install chrome-gnome-shell</span><br></pre></td></tr></table></figure><p>然后安装浏览器插件（<strong>谷歌浏览器</strong>）：<a href="https://chrome.google.com/webstore/detail/gnome-shell-integration/gphhapmejobijbbhgpjhcjognlahblep">Chrome 网上应用商店</a> 。</p><p>无条件的同学可以使用火狐浏览器安装扩展：<a href="https://addons.mozilla.org/zh-CN/firefox/addon/gnome-shell-integration/?src=search">GNOME Shell integration</a> 。</p><p>浏览器插件安装完成后点击 <em>插件图标</em> 就能进入：<strong><a href="https://extensions.gnome.org/">Shell 扩展商店</a></strong> 。</p><p><strong>Gnome 扩展推荐</strong>（点击链接进入，按需使用） :</p><table><thead><tr><th style="text-align:left">扩展</th><th style="text-align:left">简要功能描述</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/1217/appfolders-manager/">Appfolders Management extension</a></td><td style="text-align:left">【荐】添加文件夹</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/6/applications-menu/">Applications Menu</a></td><td style="text-align:left">在顶部添加一个应用程序入口</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/595/autohide-battery/">Autohide Battery</a></td><td style="text-align:left">【荐】自动隐藏电源（充电状态下已满）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/517/caffeine/">Caffeine</a></td><td style="text-align:left">取消自动锁屏（应用前台允许下）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/779/clipboard-indicator/">Clipboard Indicator</a></td><td style="text-align:left">剪切板管理工具</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/97/coverflow-alt-tab/">Coverflow Alt-Tab</a></td><td style="text-align:left">【荐】Alt Tab 切换应用（更酷炫的界面）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/307/dash-to-dock/">Dash to Dock</a></td><td style="text-align:left">【荐】Dock （大名鼎鼎）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/1160/dash-to-panel/">Dash to Panel</a></td><td style="text-align:left">【荐】对顶栏的操作处理（诸如自动隐藏等）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/690/easyscreencast/">EasyScreenCast</a></td><td style="text-align:left">录屏工具（录制质量优秀）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/1166/extension-update-notifier/">Extension update notifier</a></td><td style="text-align:left">【荐】自动推送所有扩展的更新信息</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/1105/keys-indicator/">Keys Indicator</a></td><td style="text-align:left">【荐】顶栏显示 shift,alt,ctrl,num,cap 状态</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/1439/never-close-calendar-event/">Never close calendar event</a></td><td style="text-align:left">从不清除日历事件</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/750/openweather/">OpenWeather</a></td><td style="text-align:left">【荐】顶栏显示天气情况（支持中文）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/8/places-status-indicator/">Places Status Indicator</a></td><td style="text-align:left">【荐】提供快捷目录入口（同文件管理器）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/1349/popup-dict-switcher/">Popup dict Switcher</a></td><td style="text-align:left">一键开关划词翻译 &gt;&gt;&gt; 参考下文&lt;&lt;&lt;</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/7/removable-drive-menu/">Removable Drive Menu</a></td><td style="text-align:left">【荐】移除可移动设备</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/1112/screenshot-tool/">Screenshot Tool</a></td><td style="text-align:left">【荐】截图工具（挺方便）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/906/sound-output-device-chooser/">Sound Input &amp; Output Device Chooser</a></td><td style="text-align:left">更方便的调整声音、亮度</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/120/system-monitor/">System-monitor</a></td><td style="text-align:left">在状态栏中显示系统信息（需要解决依赖）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/584/taskbar/">TaskBar</a></td><td style="text-align:left">类似于 Windows 任务栏的显示效果</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/1238/time/">Time ++</a></td><td style="text-align:left">番茄钟（闹钟、秒表、计时器）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/1031/topicons/">TopIcons Plus</a></td><td style="text-align:left">【荐】顶栏显示应用图标（托盘显示）</td></tr><tr><td style="text-align:left"><a href="https://extensions.gnome.org/extension/19/user-themes/">User Themes</a></td><td style="text-align:left">【荐】允许本地安装使用 Shell 主题</td></tr></tbody></table><blockquote><p>以上表格提到的所有扩展都能在 Ubuntu 18.04 中使用，若出现安装失败，请检查 <strong>是否满足相关依赖</strong> 。</p></blockquote><h3 id="3-3-文件备份合集">3.3 文件备份合集</h3><h4 id="3-3-1本地同步备份">3.3.1本地同步备份</h4><p><a href="https://freefilesync.org/"><strong>FreeFileSync</strong></a> 是一款本地同步 <strong>备份</strong> 软件：如将本地硬盘上的文件同步到移动硬盘上。可以做到增量备份、自动识别差异项等。同步方式有：<em>双向、镜像、更新</em> 。下载地址：<a href="https://freefilesync.org/download.php">Download FreeFileSync</a> ，解压后直接点击 <em>FreeFileSync</em> 文件就能使用。</p><ul><li>因为没有图标，这里给出写入图标的方式（有工具就绝对不手写）：</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># –-no-install-recommends 参数避免安装非必须的文件，从而减小体积</span></span><br><span class="line">sudo apt install --no-install-recommends gnome-panel</span><br></pre></td></tr></table></figure><ul><li>创建应用程序启动方式</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gnome-desktop-item-edit /usr/share/applications/ --create-new</span><br></pre></td></tr></table></figure><p>命令：点浏览展开到解压目录，选择 <em>FreeFileSync</em> 的可执行文件。</p><p>图标：解压包中有一个名为 <em>Resources.zip</em> 的压缩包，含有一些图片，从中选取软件图标。</p><h4 id="3-3-2-云端同步备份">3.3.2 云端同步备份</h4><p><a href="https://www.jianguoyun.com/"><strong>坚果云</strong></a> 是一款云端 <strong>同步</strong> 软件，与同类的 <em>OneDrive</em> 相比，坚果云做到了全平台兼容。</p><p>其免费版本流量限制、空间不限（下载 3G/月，上传 1G/月）；专业版一年 42G 空间、不限流量，<em>199.90</em> 元（<em>差不多是处于打折状态下 Office 365 的价格，有 1T OneDrive 空间</em>）。</p><p>下载地址：<a href="https://www.jianguoyun.com/s/downloads/linux">坚果云 Linux 版</a> （普通的 deb 安装包）</p><h4 id="3-3-3-局域网文件互传">3.3.3 局域网文件互传</h4><p><strong>Chfs</strong> 是一个免费的、HTTP 协议的文件共享服务器，使用浏览器可以快速访问。它具有以下特点：</p><ol><li><strong>单个文件</strong>，整个软件只有一个可执行程序，无配置文件等其他文件</li><li>跨平台运行，支持主流平台：Windows，Linux 和 Mac</li><li>支持扫码下载和手机端访问，手机与电脑之间共享文件非常方便</li><li>支持账户权限控制和地址过滤</li></ol><p>下载地址：<a href="http://iscute.cn/chfs">CuteHttpFileServer</a> ，使用方案见网站说明。</p><h4 id="3-3-4-在线文件管理器">3.3.4 在线文件管理器</h4><p>基于 <strong>Caddy</strong> 的 <strong>FileBrowser</strong> 模块，除此之外还可以使用 webdav 模块启用 webdav 功能。</p><ul><li>安装 Caddy</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://getcaddy.com | bash -s personal http.filebrowser</span><br></pre></td></tr></table></figure><ul><li>新建配置文件 <code>Caddyfile</code> ，文件位置 <code>/home/ubuntu/caddy/Caddyfile</code></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">:8080 &#123;</span><br><span class="line">  gzip</span><br><span class="line">  timeouts none</span><br><span class="line">  filebrowser / / &#123;</span><br><span class="line">    database /home/ubuntu/caddy/filebrowser.db</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上写法的作用是通过 IP 的 <code>8080</code> 端口访问网页，这个 IP 既可以是公网 IP 也可以是内网 IP 。具体的文件路径可以在登录网页后在网站设置内手动修改，数据库的存放目录要灵活自己选择，配置文件的存放目录同样可以自拟。</p><p>在 <code>/home/ubuntu/caddy/</code> 目录下打开终端，执行命令：<code>caddy</code> ，终端提示错误忽略即可。</p><p>打开网址：<a href="http://localhost:8080">http://localhost:8080</a> 访问，默认的用户名和密码均为：<code>admin</code> （可以手写一个脚本自动运行）。</p><p><strong>更多的内容可以参看这篇实验：</strong><a href="https://cloud.tencent.com/developer/labs/lab/10453">基于 Caddy 搭建基于网页的文件共享管理系统</a> 。</p><p>相关文档：<a href="https://docs.filebrowser.xyz/installation#caddy">FileBrowser # caddy</a> 。</p><h4 id="3-3-5-系统快照备份">3.3.5 系统快照备份</h4><p>制作快照的软件 <strong>TimeShift</strong> ，可以对整个分区进行备份，以分区为单位进行恢复。这里安装它即可：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install timeshift</span><br></pre></td></tr></table></figure><ul><li>相关链接：<a href="https://github.com/teejee2008">teejee2008</a>/<a href="https://github.com/teejee2008/timeshift">timeshift</a></li></ul><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110243274.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110243274.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="超级推荐的软件">  <figcaption>超级推荐的软件</figcaption></figure></p><h3 id="3-4-网易云音乐">3.4 网易云音乐</h3><ul><li><strong>以下内容对应网易云音乐 1.1.0 版本。</strong></li></ul><p>首先去网易云音乐官网 <a href="https://music.163.com/#/download">下载安装包</a>（Ubuntu 16.04 64 位），然后就是正常的 deb 包安装过程。</p><p>安装完毕后，会发现在应用列表中 <strong>点击应用图标无法启动软件</strong> ，解决方案：</p><p>修改网易云音乐的启动图标</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /usr/share/applications/netease-cloud-music.desktop</span><br></pre></td></tr></table></figure><p>修改 Exec 这一行内容</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exec=sh -c <span class="string">&quot;unset SESSION_MANAGER &amp;&amp; netease-cloud-music %U&quot;</span></span><br></pre></td></tr></table></figure><p>附录：网易云音乐配置及缓存目录</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/.config/netease-cloud-music</span><br><span class="line">~/.cache/netease-cloud-music</span><br></pre></td></tr></table></figure><blockquote><p>参考资料地址：<a href="https://www.zhihu.com/question/277330447/answer/478510195">Ubuntu 18.04 装了网易云音乐，难道只能用 sudo 启动吗？- @Fancy 解答</a></p></blockquote><h3 id="3-5-Clash">3.5 Clash</h3><blockquote><p>地址：<a href="https://github.com/Dreamacro">Dreamacro</a>/<a href="https://github.com/Dreamacro/clash">clash</a>  A rule-based tunnel in Go.</p></blockquote><ul><li>HTTP/HTTPS and SOCKS protocol</li><li>Surge like configuration</li><li>GeoIP rule support</li><li>Support Vmess/Shadowsocks/Socks5</li><li>Support for Netfilter TCP redirect</li></ul><blockquote><p>大部分 PC 下载 clash-linux-amd64.tar.gz 即可。</p><p>利用 <a href="http://clash.razord.top/">Clash Dashboard</a> 切换，管理。</p><p>写个小脚本解决自启动。</p></blockquote><h3 id="3-6-Chrome">3.6 Chrome</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add - </span><br><span class="line">sudo sh -c <span class="string">&#x27;echo &quot;deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main&quot; &gt;&gt; /etc/apt/sources.list.d/google.list&#x27;</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install google-chrome-stable</span><br></pre></td></tr></table></figure><ul><li>相关链接：<a href="https://www.google.com/linuxrepositories/">Google Linux Software Repositories</a> , <a href="https://www.ubuntuupdates.org/ppa/google_chrome">UbuntuUpdates</a> 。</li></ul><h3 id="3-7-Typora">3.7 Typora</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget -qO - https://typora.io/linux/public-key.asc | sudo apt-key add -</span><br><span class="line">sudo add-apt-repository <span class="string">&#x27;deb https://typora.io/linux ./&#x27;</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install typora</span><br></pre></td></tr></table></figure><ul><li>相关链接：<a href="https://www.typora.io/#linux">Typora for Linux</a></li></ul><h3 id="3-8-Albert">3.8 Albert</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install curl</span><br><span class="line">curl https://build.opensuse.org/projects/home:manuelschneid3r/public_key | sudo apt-key add -</span><br><span class="line">sudo sh -c <span class="string">&quot;echo &#x27;deb http://download.opensuse.org/repositories/home:/manuelschneid3r/xUbuntu_18.04/ /&#x27; &gt; /etc/apt/sources.list.d/home:manuelschneid3r.list&quot;</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install albert</span><br></pre></td></tr></table></figure><ul><li>相关链接：<a href="https://albertlauncher.github.io/docs/installing/">Albert</a> , <a href="https://software.opensuse.org/download.html?project=home:manuelschneid3r&amp;package=albert">OpenSUSE</a></li></ul><h3 id="3-9-popup-dict">3.9 popup-dict</h3><p>Linux 下的划词翻译工具，支持使用有道等多种翻译服务。</p><p>安装过程：安装 pip3 ，如果已有请忽略此步骤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3-pip</span><br></pre></td></tr></table></figure><p>安装 PyGObject 依赖</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python-gi python-gi-cairo python3-gi python3-gi-cairo gir1.2-gtk-3.0</span><br></pre></td></tr></table></figure><p>安装 popup-dict</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install popupdict</span><br></pre></td></tr></table></figure><p>运行软件：使用 Gnome 扩展  <a href="https://extensions.gnome.org/extension/1349/popup-dict-switcher/"><code>Popup dict Switcher</code></a></p><ul><li>相关链接：<a href="https://github.com/bianjp">bianjp</a>/<a href="https://github.com/bianjp/popup-dict">popup-dict</a></li></ul><hr><h2 id="四、编程程序">四、编程程序</h2><h3 id="4-1-Hexo-Node-js">4.1 Hexo | Node.js</h3><blockquote><p>三连击预备，Hexo 是一套静态博客系统。如果没有终端代理下载速度可能会绝望的。</p></blockquote><ul><li>安装 NVM ：<code>wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh</code></li><li>安装 Node：<code>nvm install stable</code></li><li>安装 Hexo：<code>npm install -g hexo-cli</code></li></ul><h3 id="4-2-Git-配置">4.2 Git 配置</h3><ul><li>生成 key ：<code>ssh-keygen -t rsa -C &quot;youremail@example.com&quot;</code></li><li>配置用户名：<code>git config --global user.name &quot;Your Name&quot;</code></li><li>配置邮箱：<code>git config --global user.email &quot;email@example.com&quot;</code></li><li>测试 Github 联通：<code>ssh -T git@github.com</code></li><li>将公钥提取出来命名为：<code>authorized_keys</code> 扔到服务器的 <code>~/.ssh</code> 目录就可以免密登录</li><li>访问远程主机：<code>ssh 用户名@域名/IP</code></li></ul><h3 id="4-3-MySQL-8-X">4.3 MySQL 8.X</h3><blockquote><p>在不做处理的情况下，命令行安装 MySQL 版本为 5.7 ，而它只适配到 Ubuntu 17.04 。</p></blockquote><p>先下载 APT 存储库，地址：<a href="https://dev.mysql.com/downloads/repo/apt/">MySQL APT Repository</a> 。</p><p>然后运行它，默认即为 MySQL 8.0 ，移动光标到 OK 确认即可。</p><p>接着就可以在终端下正常安装 MySQL 了：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install mysql-server</span><br></pre></td></tr></table></figure><p>附录：执行安全脚本</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure><p>附录：安装 WorkBench</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install mysql-workbench-community</span><br></pre></td></tr></table></figure><ul><li>相关链接：<a href="https://www.howtoing.com/install-mysql-8-in-ubuntu">如何在Ubuntu 18.04中安装MySQL 8.0</a></li></ul><h2 id="五、补充内容">五、补充内容</h2><h3 id="5-1-软件列表">5.1 软件列表</h3><ul><li>音乐软件：<a href="https://music.163.com/#/download">网易云音乐</a>、<a href="https://www.spotify.com/int/download/linux/">Spotify</a>、<em>Audacious</em></li><li>聊天软件：<a href="http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/">TIM</a>、<a href="http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/">微信</a>、Telegram</li><li>办公软件：<a href="http://www.wps.cn/product/wpslinux">WPS</a>、<a href="https://www.foxitsoftware.cn/downloads/">Foxit Reader</a>、 <em>Kile</em>、<a href="https://www.jianguoyun.com/s/downloads">坚果云</a>、XMind、百度脑图离线版</li><li>图形软件：<em>Converseen</em>（图片格式转换）、<em>Krita</em>（类似 PS）、<em>polarr</em> （泼辣修图）</li><li>下载软件：<em>aMule</em>（电驴）、<em>Deluge</em>（种子）、<em>qBittorrent</em>（种子）、<em>uGet</em>（有点类似 IDM）</li><li>截图录屏：<em>深度截图</em>、<em>深度取色器</em>、<em>Shutter</em>、<em>SimpleScreen</em></li><li>版本管理：<a href="https://www.gitkraken.com/git-client">GitKraken</a>、<em>Meld</em></li><li>浏览器：Chrome、<em>Firefox</em></li><li>软件启动器：Albert</li><li>应用商店：App Grid</li><li>剪切板管理：<em>Cliplt</em></li><li>网络代理：electron-ssr</li><li>虚拟键盘：<em>Florence</em></li><li>密码管理：<em>KeePassXC</em></li><li>音频剪辑：<em>Audacity</em></li></ul><h3 id="5-2-代码篇">5.2 代码篇</h3><h4 id="5-2-1-软件图标文件位置">5.2.1 软件图标文件位置</h4><p><code>/usr/share/applications</code> # 大部分启动图标都在此</p><p><code>~/.local/share/applications</code> # 一部分本地图标</p><p><code>/var/lib/snapd/desktop/applications</code> # snap 类软件在此</p><p>对于 *<em>.desktop</em> 文件，可以使用文本编辑器对图标或名称之类的进行修改。</p><h4 id="5-2-2-代码篇">5.2.2 代码篇</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有 shell 以及如何切换</span></span><br><span class="line">cat /etc/shells</span><br><span class="line">chsh -s /xxx/xxxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制清空回收站</span></span><br><span class="line">sudo rm -rf <span class="variable">$HOME</span>/.<span class="built_in">local</span>/share/Trash/files/*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统环境变量位置</span></span><br><span class="line">/etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 环境变量值 PATH 的一种写法</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:变量1:变量2:变量3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 个人终端下的环境变量</span></span><br><span class="line">~/.bashrc</span><br><span class="line">~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># MySQL 的 root 账户密码</span></span><br><span class="line">sudo mysql -u root <span class="comment"># 使用管理员权限进数据库</span></span><br><span class="line">DROP USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>; <span class="comment"># 删除原数据库中 root 账户</span></span><br><span class="line">CREATE USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;passwd&#x27;</span>; <span class="comment"># 新建并指定密码</span></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span>; <span class="comment"># 赋权</span></span><br><span class="line">FLUSH PRIVILEGES; <span class="comment"># 更新</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多版本切换（ java 等）</span></span><br><span class="line">sudo update-alternatives --install &lt;link&gt; &lt;name&gt; &lt;path&gt; &lt;priority&gt;</span><br><span class="line">sudo update-alternatives --remove &lt;name&gt; &lt;path&gt;</span><br><span class="line">sudo update-alternatives --config &lt;name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Java 环境变量的写法</span></span><br><span class="line"><span class="comment"># 假设 JDK 的解压目录为 /usr/lib/jvm/jdk</span></span><br><span class="line"><span class="comment"># 需要修改文件 /etc/profile</span></span><br><span class="line">sudo gedit /etc/profile</span><br><span class="line"><span class="comment"># 打开文本编辑器后，在最下面添加：</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/jdk</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$&#123;JAVA_HOME&#125;</span>/lib:&#123;JRE_HOME&#125;/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:&#123;JAVA_HOME&#125;/bin:</span><br><span class="line"><span class="comment"># 然后保存退出 刷新</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="comment"># 添加连接</span></span><br><span class="line">sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/jdk/bin/java 300</span><br><span class="line">sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/jdk/bin/javac 300</span><br><span class="line">sudo update-alternatives --install /usr/bin/jar jar /usr/lib/jvm/jdk/bin/jar 300</span><br><span class="line"></span><br><span class="line"><span class="comment"># Python Anaconda env 配置</span></span><br><span class="line">conda create -n your_env_name python=3.7 <span class="comment"># 创键环境</span></span><br><span class="line">conda activate your_env_name <span class="comment"># 激活环境</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MariaDB</span></span><br><span class="line"><span class="comment"># 使用自定义源 TUNA</span></span><br><span class="line">sudo apt-get install software-properties-common</span><br><span class="line">sudo apt-key adv --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 0xF1656F24C74CD1D8</span><br><span class="line">sudo add-apt-repository <span class="string">&#x27;deb [arch=amd64,arm64,ppc64el] http://mirrors.tuna.tsinghua.edu.cn/mariadb/repo/10.3/ubuntu bionic main&#x27;</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install mariadb-server</span><br><span class="line"><span class="comment"># 配置</span></span><br><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure><h4 id="5-2-3-踩坑记录">5.2.3 踩坑记录</h4><ul><li><p>VMware : 虚拟机安装的前置依赖为：<code>make</code> <code>gcc</code> 。</p></li><li><p>JetBrains toolbox ：使用 toolbox 安装软件比 snap 好太多（速度感人），它也能自动更新 IDE 。但是它会疯狂修改 <code>.desktop</code> 文件，强迫症表示必须要修改图标的样式和主题一致，把图标文件权限设置为只读就能解决。</p></li><li><p>Minecraft 所需要的 JDK 只需要提前安装一个 <code>openjdk-8-jre</code> 。</p></li><li><p>Life is Strange 奇异人生所需要的 Linux 版汉化：<a href="https://pan.baidu.com/s/1dECSYfJ">百度网盘</a> 。</p></li><li><p>XMind : 无启动图标，需要手动添加应用图标，有一个小麻烦是桌面图标文件所在的目录必须和启动软件同目录。此外 XMind 8 版本存在可用的破解激活方案。依赖 JDK8。</p></li><li><p>善用 TimeShift ，它提供了一个回滚系统的机会。</p></li></ul><h2 id="六、截图">六、截图</h2><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110318847.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110318847.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="桌面">  <figcaption>桌面</figcaption></figure></p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110337914.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110337914.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="软件列表">  <figcaption>软件列表</figcaption></figure></p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110355777.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95.assets/image-20200507110355777.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="系统">  <figcaption>系统</figcaption></figure></p>]]></content>
    
    
    <summary type="html">完整介绍 Ubuntu 18.04 LTS X86_64 的安装过程，拒绝零零散散。</summary>
    
    
    
    <category term="教程" scheme="https://inkss.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Ubuntu 18.04" scheme="https://inkss.cn/tags/Ubuntu-18-04/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 下联想 Y7KP 显卡和网卡驱动配置</title>
    <link href="https://inkss.cn/blog/9a96536e/"/>
    <id>https://inkss.cn/blog/9a96536e/</id>
    <published>2019-04-02T11:27:00.000Z</published>
    <updated>2020-05-12T11:27:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>前言：最近换了个笔记本：联想 Y7000P i5-8300H GTX1060 。驱动上出了些问题，故录此文章，仅供参考。</p></blockquote><h2 id="一、显卡驱动">一、显卡驱动</h2><p>在换这个笔记本之前，上一个笔记本的显卡为 AMD ，倒也没使用过英伟达显卡，曾经看着过很多人吐槽显卡驱动，给我一种它很难装的感觉。但是在本次的使用中，显卡驱动只需要轻轻切换成私有显卡就好了，或许是新版 Ubuntu 做好了适配，这倒是个好事。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04Y7KP.assets/szyink-20190402142329-522x452.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04Y7KP.assets/szyink-20190402142329-522x452.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="软件和更新">  <figcaption>软件和更新</figcaption></figure></p><p>如上图，在 <strong>软件和更新</strong> 的 <strong>附加驱动</strong> 中勾选使用专用驱动就 OK 了。</p><h2 id="二、网卡驱动">二、网卡驱动</h2><p>相比于显卡驱动，网卡驱动倒是头疼了很久。在安装 Ubuntu 系统时使用的是有线连接，完全没注意到无线连接会出现问题，后来发现这个问题时一度担心操作系统没有该网卡驱动，幸好是有的，可以解决。</p><p>在最开始，操作系统甚至 <strong>无法识别出无线模块，提示没有适配器</strong> ，这里的操作是从官网下载驱动进行安装。</p><ul><li><p>Y7000P 的网卡型号是：<code>Intel® Wireless-AC 9560</code></p></li><li><p>在官网下载 Linux 版本的驱动：<a href="https://www.intel.com/content/www/us/en/support/articles/000005511/network-and-i-o/wireless-networking.html">Linux * Support for Intel</a> 。</p></li></ul><p>下载驱动解压后，按照要求将驱动文件复制到 <code>lib/firmware</code> 目录，然后重启电脑，就能出现适配器了。但此时还无法使用，大致的解释是笔记本带的驱动和 Ubuntu 系统中的驱动冲突，我们需要禁用一个。</p><p>修改文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/modprobe.d/blacklist-firewire.conf</span><br></pre></td></tr></table></figure><p>在最后追加一行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blacklist ideapad_laptop</span><br></pre></td></tr></table></figure><p>然后重启电脑就好了，最后说一下我在查阅资料时大部分人似乎一开始就有 wifi 适配器，只需要修改文件就行，我这儿连 wifi 模块都没有，这里需要合理判断咯。</p><hr><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04Y7KP.assets/szyink-20190402144556-980x708.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04Y7KP.assets/szyink-20190402144556-980x708.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Wifi">  <figcaption>Wifi</figcaption></figure></p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Ubuntu18.04Y7KP.assets/szyink-20190402144606-980x708.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Ubuntu18.04Y7KP.assets/szyink-20190402144606-980x708.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="PC">  <figcaption>PC</figcaption></figure></p>]]></content>
    
    
    <summary type="html">Ubuntu 18.04 下联想 Y7000P 的网卡和显卡驱动安装配置。最近换了个笔记本：联想 Y7000P i5-8300H GTX1060 。驱动上出了些问题，故录此文章，仅供参考。</summary>
    
    
    
    <category term="教程" scheme="https://inkss.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="联想Y7000P" scheme="https://inkss.cn/tags/%E8%81%94%E6%83%B3Y7000P/"/>
    
    <category term="网卡驱动" scheme="https://inkss.cn/tags/%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8/"/>
    
    <category term="显卡驱动" scheme="https://inkss.cn/tags/%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8/"/>
    
  </entry>
  
  <entry>
    <title>Office 365 免费订阅申请</title>
    <link href="https://inkss.cn/blog/82e6dcea/"/>
    <id>https://inkss.cn/blog/82e6dcea/</id>
    <published>2018-09-29T21:26:00.000Z</published>
    <updated>2020-03-26T16:30:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>Office 365 开发人员计划</strong> ：通过这个计划可以免费申请到一年 <code>Office 365 企业版 E3（开发人员）</code> 订阅。</p></blockquote><h2 id="1-Office-365-开发人员计划">1.Office 365 开发人员计划</h2><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/01.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Office 365">  <figcaption>Office 365</figcaption></figure></p><p>➡️ <strong>相关链接</strong>：<a href="https://developer.microsoft.com/zh-cn/office/dev-program">Office 365 开发者计划</a></p><p>申请过程这里不多阐述了，登录微软账户后按照提示操作即可，最终能够获得：</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/02.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="订阅信息">  <figcaption>订阅信息</figcaption></figure></p><p>总共有 25 个账户，24 个可分配用户，每一个用户等同一个 Office 365 家庭版订阅。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/03.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="安装状态">  <figcaption>安装状态</figcaption></figure></p><h2 id="2-设置-Office-域">2.设置 Office 域</h2><p>在 <strong>Microsoft 365 admin center</strong> 界面，有一个被称作 <strong>域</strong> 的功能：</p><p>默认的域名为：<code>username.onmicrosoft.com</code> ，用户默认登录名则是：<code>xxxx.username.onmicrosoft.com</code> 。</p><p>本质上只是一个三级域名，长且繁琐，所以最好使用自己的域名。鉴于成本原因（外加不需要备案），此处推荐从   <strong>Freenom</strong> 处申请。</p><p>➡️ <strong>相关链接</strong>：<a href="https://www.freenom.com/zh/index.html">Freenom</a></p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/04.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/04.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Freenom">  <figcaption>Freenom</figcaption></figure></p><p>可以在这个网站上 <strong>以免费的价格申请到最长一年</strong> 的域名（在域名到期前会发邮件通知）。</p><p>拿到域名后，回到 Office 设置，添加域信息即可（其中一步需要更改域名的 DNS 解析）。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/05.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/05.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="DNS 设置">  <figcaption>DNS 设置</figcaption></figure></p><p>在 Office 域中显示如下：</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/06.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Office-365-%E5%85%8D%E8%B4%B9%E8%AE%A2%E9%98%85%E7%94%B3%E8%AF%B7.assets/06.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Office 域">  <figcaption>Office 域</figcaption></figure></p><h2 id="3-免费域名">3.免费域名</h2><p>虽然 Freenom 提供了免费域名申请，但是其用户协议里也要求域名必须能够正常使用（也就是通过域名必须能够访问成功），否则域名就会被收回。</p><p>这里的处理措施是用 Github Page 规避：<a href="https://github.com/July7183/july7183.github.io">https://github.com/July7183/july7183.github.io</a></p><hr><p><strong><a href="https://www.inkss.cf">https://www.inkss.cf</a></strong></p><ul><li>通过s开发者认证可以申请到一年 25 账户 的 Office 365 E3 订阅。</li><li>Office 365 提供了一个域功能，允许用户使用自有域名设置账户信息。</li><li>Freenom 提供免费域名的申请，但是域名必须能够正常访问，否则域名就会被收回。</li><li>本域名并未备案，因为域的原因使用了微软 DNS 解析，不确保中国境内的正常访问。</li><li>微软的 DNS 竟然不能直接解析主域名 <code>@</code> 。</li></ul><blockquote><p>更多信息参阅：<a href="https://inkss.cn/2018/09/29/free-office-365/">https://inkss.cn/2018/09/29/free-office-365/</a></p></blockquote>]]></content>
    
    
    <summary type="html">免费申请一年 Office 365 E3 订阅，自定义 Office 域设置。</summary>
    
    
    
    <category term="教程" scheme="https://inkss.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Office" scheme="https://inkss.cn/tags/Office/"/>
    
  </entry>
  
  <entry>
    <title>浅谈泛域名：解析、证书、分发</title>
    <link href="https://inkss.cn/blog/8967398c/"/>
    <id>https://inkss.cn/blog/8967398c/</id>
    <published>2018-09-25T13:48:00.000Z</published>
    <updated>2020-04-16T16:03:00.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li>概述：本文主要介绍这些内容： <strong>DNS 泛域名解析</strong>、<strong>SSL 泛域名证书申请</strong>、<strong>CDN 泛域名加速（分发）。</strong></li><li>前置：本文中 DNS 服务商为 <a href="https://www.dnspod.cn">DNSPod</a> ，SSL 证书由 <a href="https://letsencrypt.org">Let’s Encrypt</a> 颁发，CDN 则是使用 <a href="https://cloud.tencent.com/product/cdn-scd">腾讯云 CDN</a> 。</li><li>环境：基础的操作环境：主机: <strong>CentOS 7.4</strong> 、服务器: <strong>Nginx</strong> 、其他：<code>acme.sh</code> 。</li><li>附录：介绍 CentOS 的 Nginx 安装和配置。</li></ul><hr><h2 id="一、DNS-域名解析">一、DNS 域名解析</h2><blockquote><p>谈及 DNS 解析，一般有这几点要素：<strong>主机记录</strong>、<strong>记录类型</strong>、<strong>线路类型</strong>、<strong>记录值</strong>、<strong>TTL</strong> 。</p></blockquote><ul><li><strong>主机记录（<em>@, *,xxx</em>）</strong> 假设根域名： <code>domain.com</code></li></ul><table><thead><tr><th>主机记录</th><th>解释</th><th>解析后网址</th></tr></thead><tbody><tr><td>@</td><td>直接对主域名解析</td><td><code>domain.com</code></td></tr><tr><td><strong>*</strong></td><td><strong>泛域名解析，匹配所有二级域名</strong></td><td><code>*.domain.com</code></td></tr><tr><td>www</td><td>对二级域名为 www 的网址解析</td><td><code>www.domain.com</code></td></tr><tr><td>xxx</td><td>对二级域名为 xxx 的网址解析</td><td><code>xxx.domain.com</code></td></tr></tbody></table><ul><li>记录类型 （<em><strong>A,CNAME,TXT,NS,显性 URL ,隐性 URL</strong></em>）</li></ul><p><code>A</code> 记录：解析到具体的 <em>服务器 IP 地址</em> ；<code>CNAME</code> ：解析到另一域名（<strong>比如 CDN 的加速域名</strong>），<em>通过另一域名获取服务器 IP 地址</em> 。</p><p><code>显性 URL</code> 则是使用 301 跳转 <em>重定向</em> 域名，而 <code>隐性URL</code> 本质上只是一个 <em>嵌套 iframe</em> （一个是 DNS 服务器做重定向，一个是 DNS 服务器套一个网页）。<code>NS</code> 则是用来换 DNS 服务商时使用。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/%E6%B5%85%E8%B0%88%E7%BD%91%E7%AB%99%E6%B3%9B%E5%9F%9F%E5%90%8D.assets/01.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E6%B5%85%E8%B0%88%E7%BD%91%E7%AB%99%E6%B3%9B%E5%9F%9F%E5%90%8D.assets/01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="DNS 域名解析 - 记录类型">  <figcaption>DNS 域名解析 - 记录类型</figcaption></figure></p><h2 id="二、SSL-泛域名证书申请">二、SSL 泛域名证书申请</h2><blockquote><p>支持 <strong>免费</strong> 泛域名证书申请的只有 Let’s Encrypt 了。</p></blockquote><p>有兴趣可以去其官网看看，每次申请可以获取三个月证书时间，所以此处借助工具：<a href="https://github.com/Neilpang/acme.sh">acme.sh</a></p><p>安装方法也非常简单，见其中文帮助文档：<a href="https://github.com/Neilpang/acme.sh/wiki/%E8%AF%B4%E6%98%8E">acme.sh-说明</a> ，在本文中简单的记录一下：</p><h3 id="（1）安装-acme-sh">（1）安装 <a href="http://acme.sh">acme.sh</a></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl https://get.acme.sh | sh</span><br><span class="line"><span class="built_in">alias</span> acme.sh=~/.acme.sh/acme.sh</span><br></pre></td></tr></table></figure><h3 id="（2）生成证书：DNS-方式">（2）生成证书：DNS 方式</h3><p>需要先登录 dnspod 获取 API 的 ID 和 Key 。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> DP_Id=<span class="string">&quot;1234&quot;</span></span><br><span class="line"><span class="built_in">export</span> DP_Key=<span class="string">&quot;sADDsdasdgdsf&quot;</span></span><br><span class="line">acme.sh --issue --dns dns_dp -d domain.com -d *.domain.com</span><br></pre></td></tr></table></figure><h3 id="（3）安装证书">（3）安装证书</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --installcert -d domain.com \</span><br><span class="line"> --key-file /etc/pki/nginx/domain.key \</span><br><span class="line"> --fullchain-file /etc/pki/nginx/fullchain.cer \</span><br><span class="line"> --reloadcmd <span class="string">&quot;service nginx force-reload&quot;</span></span><br></pre></td></tr></table></figure><h3 id="（4）更新证书">（4）更新证书</h3><blockquote><p>目前证书在 60 天以后会自动更新, 你无需任何操作。</p></blockquote><h3 id="（5）自动更新-acme-sh">（5）自动更新 <a href="http://acme.sh">acme.sh</a></h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh  --upgrade  --auto-upgrade</span><br></pre></td></tr></table></figure><h2 id="三、CDN-泛域名分发">三、CDN 泛域名分发</h2><p>这里使用的是腾讯云的 CDN （阿里云也是可以的），前置条件：<strong>备案 + 验证</strong> 。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/%E6%B5%85%E8%B0%88%E7%BD%91%E7%AB%99%E6%B3%9B%E5%9F%9F%E5%90%8D.assets/02.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E6%B5%85%E8%B0%88%E7%BD%91%E7%AB%99%E6%B3%9B%E5%9F%9F%E5%90%8D.assets/02.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="申请泛域名分发">  <figcaption>申请泛域名分发</figcaption></figure></p><p>除了需要验证外，其余的添加方法与普通 CDN 域名加速的设置项均相同。但是有一点需要注意：</p><p>全站 Https，泛域名的 SSL 证书 <strong>必须要部署到 CDN</strong> 上，否则 CDN 会用腾讯云的证书然后就证书不符报错啦。</p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/%E6%B5%85%E8%B0%88%E7%BD%91%E7%AB%99%E6%B3%9B%E5%9F%9F%E5%90%8D.assets/03.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/%E6%B5%85%E8%B0%88%E7%BD%91%E7%AB%99%E6%B3%9B%E5%9F%9F%E5%90%8D.assets/03.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="部署证书（可以不开强制跳转）">  <figcaption>部署证书（可以不开强制跳转）</figcaption></figure></p><h2 id="四、附录">四、附录</h2><h3 id="（1）CentOS-配置-Nginx">（1）CentOS 配置 Nginx</h3><h4 id="1-安装-Nginx">1.安装 Nginx</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nginx</span><br></pre></td></tr></table></figure><h4 id="2-启动-Nginx">2.启动 Nginx</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx.service</span><br></pre></td></tr></table></figure><h4 id="3-设为开机自启">3.设为开机自启</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> nginx.service</span><br></pre></td></tr></table></figure><h4 id="4-Nginx-配置信息">4.Nginx 配置信息</h4><ul><li>网站文件存放默认目录：<code>/usr/share/nginx/html</code></li><li>网站默认站点配置文件：<code>/etc/nginx/conf.d/default.conf</code></li><li>自定义站点配置文件：<code>/etc/nginx/conf.d/</code></li><li>全局配置文件：<code>/etc/nginx/nginx.conf</code></li></ul><h3 id="（2）Nginx-配置-Http-跳转-Https">（2）Nginx 配置 Http 跳转 Https</h3><blockquote><p>均修改全局配置文件 <code>nginx.conf</code> 。</p></blockquote><h4 id="1-开启-443-监听">1.开启 443 监听</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl http2 default_server;</span><br><span class="line">    listen       [::]:443 ssl http2 default_server;</span><br><span class="line">    server_name  inkss.cn;</span><br><span class="line">    root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">    ssl_certificate &quot;&#x2F;etc&#x2F;pki&#x2F;nginx&#x2F;fullchain.cer&quot;;</span><br><span class="line">    ssl_certificate_key &quot;&#x2F;etc&#x2F;pki&#x2F;nginx&#x2F;inkss.key&quot;;</span><br><span class="line">    ssl_session_cache shared:SSL:1m;</span><br><span class="line">    ssl_session_timeout  10m;</span><br><span class="line">    ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-Http-跳转-Https">2.Http 跳转 Https</h4><p>在监听 80 的函数内添加 <code>rewrite ^(.*)$ https://$host$1 permanent;</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80 default_server;</span><br><span class="line">    listen       [::]:80 default_server;</span><br><span class="line">    server_name  inkss.cn;</span><br><span class="line">    root         &#x2F;var&#x2F;www&#x2F;html;</span><br><span class="line">    rewrite ^(.*)$ https:&#x2F;&#x2F;$host$1 permanent;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><a href="#top">回到顶部</a> © Inkss</p>]]></content>
    
    
    <summary type="html">本文主要介绍这些内容： DNS 泛域名解析、SSL 泛域名证书申请、CDN 泛域名加速（分发）。</summary>
    
    
    
    <category term="博客" scheme="https://inkss.cn/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="网站" scheme="https://inkss.cn/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="Linux" scheme="https://inkss.cn/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 博客搭建</title>
    <link href="https://inkss.cn/blog/196d2ba7/"/>
    <id>https://inkss.cn/blog/196d2ba7/</id>
    <published>2018-09-15T13:48:00.000Z</published>
    <updated>2020-05-12T11:27:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文偏向于记录备份，非新手向教程，仅供参考。 🐱</p></blockquote><p>先说搭建这个博客的原因：在搭建博客之前我的所有的文章都是存储在 <a href="https://github.com/inkss/markdown">inkss/markdown</a> 仓库中，直到某天 <strong>在投简历的时候发现有的要求填写博客链接</strong> ，掐指一算在玩腻饥荒后似乎还闲置着一个腾讯云的学生主机，索性自己折腾一个博客出来。而以简单快速为目的话，还是主推： <code>Hexo</code> 。</p><p>Hexo 可以帮忙生成全静态的网页，所以在存储位置上可以有：<code>Github Page、OSS 对象存储、云主机</code> 等多种选择。</p><p>那么接下来就是研究一下如何使用这个框架，以及找一个好看顺心的主题（<s>然后连续几天沉迷调试主题不可自拔…</s>)。</p><h2 id="1-基础环境">1.基础环境</h2><p><strong>基础环境</strong>：<code>Git、Node、Hexo</code>；<strong>OS</strong> ：<code>Ubuntu 18.04 LTS</code> ；<strong>服务器</strong>：<code>CentOS 7.4</code> 。</p><p>Git 和 Github 作为前置环境，本文不做重点阐述。Git 的安装命令：<code>sudo apt install git</code> 。</p><p>那么进入正文部分，这里的顺序是这样的：<code>NVM</code> → <code>Node.js</code> → <code>Hexo</code> 。</p><h3 id="1-1-安装-NVM">1.1 安装 NVM</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开终端，输入：</span></span><br><span class="line">wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh</span><br></pre></td></tr></table></figure><h3 id="1-2-安装-Node">1.2 安装 Node</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开新的终端，输入：</span></span><br><span class="line">nvm install stable</span><br></pre></td></tr></table></figure><h3 id="1-3-安装-Hexo">1.3 安装 Hexo</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开新终端，输入：</span></span><br><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>以上所有步骤就可以将 Hexo 安装到你的电脑上了，总耗时 1-2 min 。</p><blockquote><p>得益于某不可言的 BUFF 加持，在不作处理的情况下网速或能够让你绝望。两类选择：<strong>换源</strong> or <strong>代理</strong> 。</p><p>换源似乎是使用淘宝的 <code>cnpm</code> 源；虽然这里使用的是给终端设置代理：<a href="https://github.com/inkss/markdown/blob/master/Linux/%E7%BD%91%E7%AB%99/Shadowsocks%20%E8%AE%BE%E7%BD%AE%E7%BB%88%E7%AB%AF%E4%BB%A3%E7%90%86.md">Shadowsocks 设置终端代理</a> 。</p></blockquote><h2 id="2-Hexo-使用">2.Hexo 使用</h2><h3 id="2-1-基础命令">2.1 基础命令</h3><p>这部分内容以 Hexo 官方文档为准，这里记录一些最常用的。传送门：<a href="https://hexo.io/zh-cn/docs/commands">命令 | Hexo</a></p><ul><li>初始化：<code>hexo init &amp;&amp; npm install</code></li><li>生成博客：<code>hexo g</code></li><li>部署博客：<code>hexo d</code></li><li>清空缓存：<code>hexo clean</code></li><li>启动本地服务器：<code>hexo s</code></li><li>组合命令：<code>hexo clean &amp;&amp; hexo g -d</code></li></ul><p>首先，拿到 Hexo 后，先是 <strong>初始化</strong> 一个文件夹，建立基本的框架结构，然后用 <code>npm install</code> 安装一些依赖。目录结构如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml            <span class="comment"># 网站配置文件</span></span><br><span class="line">├── .gitignore             <span class="comment"># Git 忽略文件</span></span><br><span class="line">├── node_modules           <span class="comment"># 插件安装目录</span></span><br><span class="line">├── package.json           <span class="comment"># 描述插件</span></span><br><span class="line">├── package-lock.json      <span class="comment"># 描述插件 更详细</span></span><br><span class="line">├── scaffolds              <span class="comment"># 模板</span></span><br><span class="line">├── <span class="built_in">source</span>                 <span class="comment"># 资源</span></span><br><span class="line">└── themes                 <span class="comment"># 主题</span></span><br></pre></td></tr></table></figure><p>想必各位对 <code>.gitignore</code> 很眼熟吧，完全可以使用 <code>git init</code> 对这个文件夹初始化后上传到 Github 仓库。</p><p>而这样操作需要注意一点：一般主题文件多半是克隆自 Git 的，所以可能会出现嵌套的情况。可选的处理方案：</p><ul><li>将主题目录加入到忽略文件中</li><li>删除主题目录里的 <code>.git</code> 文件夹</li></ul><blockquote><p>**关于恢复：**克隆仓库后，需要执行 <code>npm install --save</code> ，重新安装插件到 node_modules 目录中。</p></blockquote><h3 id="2-2-网站配置">2.2 网站配置</h3><p><strong>网站</strong> 配置文件：<code>_config.yml</code> ，官方配置文档传送门：<a href="https://hexo.io/zh-cn/docs/configuration">配置 | Hexo</a></p><p>一般来说在该配置文件中只需要修改一些网站基本属性，下面记录一下指定主题和设置发布（部署）对象：</p><h4 id="2-2-1-修改主题类型">2.2.1 修改主题类型</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">pure</span></span><br></pre></td></tr></table></figure><h4 id="2-2-2-部署到-Github">2.2.2 部署到 Github</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:xxxx/xxxxx</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><h4 id="2-2-3-忽略解析指定的文件">2.2.3 忽略解析指定的文件</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="comment"># 忽略解析指定文件：比如 Github 仓库的 ReadMe.md 文件。</span></span><br><span class="line"><span class="attr">skip_render:</span> <span class="string">README.md</span></span><br></pre></td></tr></table></figure><blockquote><p>PS：一些插件的属性设置也是在这个文件中配置的。</p></blockquote><h3 id="2-3-主题配置">2.3 主题配置</h3><blockquote><p>如果不是找到了一个看着还很舒服的主题，肯定也没有那么大的兴趣折腾博客了。</p></blockquote><p>这里使用的是 <code>Pure</code> ：原作者：<a href="https://github.com/cofess">cofess</a> 、主题：<a href="https://github.com/cofess/hexo-theme-pure">hexo-theme-pure</a> 。</p><h4 id="2-3-1-安装主题">2.3.1 安装主题</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在网站的根目录下执行</span></span><br><span class="line">git <span class="built_in">clone</span> git@github.com:dmego/hexo-theme-pure.git theme/pure</span><br></pre></td></tr></table></figure><p>然后修改 <strong>网站配置</strong> 文件,修改主题：<code>theme: pure</code> 。</p><h4 id="2-3-2-安装插件">2.3.2 安装插件</h4><p>分为必装和可选两种吧，安装插件时终端目录需位于网站根目录下（Hexo 初始化的那个目录）。</p><ul><li>① 必装插件（这部分主题 ReadMe 文件中有提及）：</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-wordcount --save</span><br><span class="line">npm install hexo-generator-json-content --save</span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><hr><ul><li>② 可选插件（一些需要在 <strong>网站配置</strong> 文件中修改属性）。</li></ul><p><a href="https://github.com/rozbo/hexo-neat">hexo-neat</a>：压缩代码</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-neat --save</span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 网站配置文件 `_config.yml` 中添加：</span></span><br><span class="line"><span class="comment"># hexo-neat</span></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span> </span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;*.min.css&#x27;</span></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;*.min.js&#x27;</span></span><br></pre></td></tr></table></figure><p><a href="https://github.com/cometlj/hexo-translate-title">hexo-translate-title</a>：自动翻译文章标题到英文</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-translate-title --save</span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 网站配置文件 `_config.yml` 中添加：</span></span><br><span class="line"><span class="comment"># translate</span></span><br><span class="line"><span class="attr">translate_title:</span></span><br><span class="line">  <span class="attr">translate_way:</span> <span class="string">google</span>    <span class="comment">#google | baidu | youdao</span></span><br><span class="line">  <span class="attr">youdao_api_key:</span> <span class="string">XXX</span></span><br><span class="line">  <span class="attr">youdao_keyfrom:</span> <span class="string">XXX</span></span><br><span class="line">  <span class="attr">is_need_proxy:</span> <span class="literal">true</span>     <span class="comment">#true | false</span></span><br><span class="line">  <span class="attr">proxy_url:</span> <span class="string">http://localhost:8123</span></span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改文章的永久链接格式（同样是网站配置文件）：</span></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:translate_title/</span></span><br></pre></td></tr></table></figure><p><a href="https://github.com/crimx/hexo-filter-github-emojis">hexo-filter-github-emojis</a>：支持 emoji 表情</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-filter-github-emojis --save</span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 网站配置文件 `_config.yml` 中添加：</span></span><br><span class="line"><span class="comment"># emoji</span></span><br><span class="line"><span class="attr">githubEmojis:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">className:</span> <span class="string">github-emoji</span></span><br><span class="line">  <span class="attr">unicode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">styles:</span></span><br><span class="line">    <span class="attr">display:</span> <span class="string">inline</span></span><br><span class="line">  <span class="attr">localEmojis:</span></span><br></pre></td></tr></table></figure><hr><ul><li>③ 部署到 Github 所必须的插件：</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nom install request --save</span><br><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><h4 id="2-3-3-配置主题">2.3.3 配置主题</h4><p>主题所在目录下也有一份 <code>_config.yml</code> 文件，这里称它为 <strong>主题配置</strong> 文件。</p><p>可以在此处对主题属性进行修改，附：图片类的资源可以直接写外链进去。</p><h2 id="3-自定义主题">3.自定义主题</h2><blockquote><p><strong>此部分内容仅供参考，或因主题变更已不适用。2018.10.08 补充。</strong></p></blockquote><h3 id="3-1-CSS-样式修改">3.1 CSS 样式修改</h3><p>主要是网页样式微调，改改字体什么的。</p><p><strong>文件地址：</strong> <code>themes/pure/source/css/style.css</code></p><h4 id="3-1-1-修改字体大小">3.1.1 修改字体大小</h4><p>默认的字体是 14px ，似乎有些小了，所以将其改为 16px 。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: -apple-system,system-ui,BlinkMacSystemFont,<span class="string">&quot;Segoe UI&quot;</span>,Roboto,<span class="string">&quot;Helvetica Neue&quot;</span>,Arial,<span class="string">&quot;PingFang SC&quot;</span>,<span class="string">&quot;Hiragino Sans GB&quot;</span>,<span class="string">&quot;Microsoft YaHei&quot;</span>,sans-serif;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.42857</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333333</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-1-2-修改代码样式">3.1.2 修改代码样式</h4><p>原主题无法显示出这样的效果： <code>code</code> ，从 Github 扒的样式，这里对其补充。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.2em</span> <span class="number">0.3em</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">85%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">27</span>,<span class="number">31</span>,<span class="number">35</span>,<span class="number">0.05</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-1-3-修改图形居中">3.1.3 修改图形居中</h4><p>原文章中图片没有居中，这里将图片的显示更改为居中。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-1-4-修改代码字体">3.1.4 修改代码字体</h4><p>Windows 下代码字体显示不是很美观，这里更改。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">code</span>,</span><br><span class="line"><span class="selector-tag">kbd</span>,</span><br><span class="line"><span class="selector-tag">pre</span>,</span><br><span class="line"><span class="selector-tag">samp</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;SFMono-Regular&quot;</span>,Consolas,<span class="string">&quot;Liberation Mono&quot;</span>,Menlo,Courier,monospace;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-恢复-referrer">3.2 恢复 referrer</h3><p>【已解决】详细见：<a href="https://github.com/cofess/hexo-theme-pure/issues/43">#43</a></p><h3 id="3-3-TOC-编号">3.3 TOC 编号</h3><p>TOC 编号，就是当展开目录时，原章节的目录内容附加了一次自动编号，如果文章本身存在着编号那么编号就重复了，所以此处更改为取消自动编号。</p><p><strong>文件地址：</strong> <code>themes/pure/layout/_partial/sidebar-toc.ejs</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;slimContent&quot;</span>&gt;</span><br><span class="line">    &lt;nav id=<span class="string">&quot;toc&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;article-toc&quot;</span>&gt;</span><br><span class="line">      &lt;h3 <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;toc-title&quot;</span>&gt;&lt;%= __(<span class="string">&#x27;article.catalogue&#x27;</span>) %&gt;&lt;/h3&gt;</span><br><span class="line">      &lt;%- toc(post.content,&#123;<span class="attr">list_number</span>: <span class="literal">false</span>&#125;) %&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="3-4-回到顶部">3.4 回到顶部</h3><p>长文章怎么能没有一个回到顶部的功能，然而恰巧主题没有，那么添加一个吧（位于右下角）。</p><p><strong>文件地址：</strong> <code>themes/pure/layout/_commonn/script.ejs</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;go-top&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line"><span class="selector-id">#go-top</span> &#123;</span><br><span class="line"> <span class="attribute">width</span>:<span class="number">40px</span>;<span class="attribute">height</span>:<span class="number">36px</span>;</span><br><span class="line"> <span class="attribute">background-color</span>:<span class="number">#777</span>;</span><br><span class="line"> <span class="attribute">position</span>:relative;</span><br><span class="line"> <span class="attribute">border-radius</span>:<span class="number">2px</span>;</span><br><span class="line"> <span class="attribute">position</span>:fixed;<span class="attribute">right</span>:<span class="number">10px</span>;<span class="attribute">bottom</span>:<span class="number">60px</span>;</span><br><span class="line"> <span class="attribute">cursor</span>:pointer;<span class="attribute">display</span>:none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#go-top</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line"> <span class="attribute">content</span>:<span class="string">&quot; &quot;</span>;</span><br><span class="line"> <span class="attribute">position</span>:absolute;<span class="attribute">left</span>:<span class="number">14px</span>;<span class="attribute">top</span>:<span class="number">14px</span>;</span><br><span class="line"> <span class="attribute">border-top</span>:<span class="number">2px</span> solid <span class="number">#fff</span>;<span class="attribute">border-right</span>:<span class="number">2px</span> solid <span class="number">#fff</span>;</span><br><span class="line"> <span class="attribute">width</span>:<span class="number">12px</span>;<span class="attribute">height</span>:<span class="number">12px</span>;</span><br><span class="line"> <span class="attribute">transform</span>:<span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#go-top</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line"> <span class="attribute">background-color</span>:<span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> top=$(<span class="string">&quot;#go-top&quot;</span>);</span><br><span class="line">  $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    ($(<span class="built_in">window</span>).scrollTop() &gt; <span class="number">300</span>) ? top.show(<span class="number">300</span>) : top.hide(<span class="number">200</span>);</span><br><span class="line">    $(<span class="string">&quot;#go-top&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      $(<span class="string">&#x27;body,html&#x27;</span>).animate(&#123;<span class="attr">scrollTop</span>:<span class="number">0</span>&#125;);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>();</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="3-5-数学公式支持">3.5 数学公式支持</h3><p>需要先更换 Hexo 的渲染引擎：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it-plus --save</span><br></pre></td></tr></table></figure><p>接着在网站配置文件末尾添加以下内容：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown_it_plus:</span></span><br><span class="line">    <span class="attr">highlight:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">html:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">xhtmlOut:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">breaks:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">langPrefix:</span></span><br><span class="line">    <span class="attr">linkify:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">typographer:</span></span><br><span class="line">    <span class="attr">quotes:</span> <span class="string">“”‘’</span></span><br><span class="line">    <span class="attr">plugins:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">&#x27;@iktakahiro/markdown-it-katex&#x27;</span></span><br><span class="line">            <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>最后需要修改主题文件，更新 Katex 版本。</p><p><strong>文件地址：</strong> <code>themes/pure/layout/_commonn/plugin.ejs</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (page.mathjax) &#123; %&gt;</span><br><span class="line">  &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css&quot;</span> integrity=<span class="string">&quot;sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv&quot;</span> crossorigin=<span class="string">&quot;anonymous&quot;</span>&gt;</span><br><span class="line">  &lt;script defer src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js&quot;</span> integrity=<span class="string">&quot;sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O&quot;</span> crossorigin=<span class="string">&quot;anonymous&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><h2 id="4-网站优化">4.网站优化</h2><blockquote><p>这部分内容将会涉及：自定义域名解析、CDN 分发、OSS 对象存储、Https 加密链接等。</p></blockquote><blockquote><p>本博客所使用的所有服务均来自于腾讯云。😘</p></blockquote><h3 id="4-1-自定义域名解析">4.1 自定义域名解析</h3><p>Github 给的默认域名形如 <code>xxxx.github.io</code> 的样式，如果拥有自己的域名话就可以对 DNS 设置一条指向该域名的 CNAME 解析。此外在网站的 <code>source</code> 目录下也需要放置一个文件：<code>CNAME</code> ，内容上只需要填写你的个人域名。</p><h3 id="4-2-CDN-分发">4.2 CDN 分发</h3><p>Github Page 的服务器毕竟不在国内（查过图片的 CDN 发现是来自日本的），虽然国外访问速度还好，但是国内访问速度就很悲伤了。不过国外的访问速度也不能浪费，所以上文的 DNS 记录就分为国内、国外两个：照顾所有位置的访问速度。</p><blockquote><p>腾讯云的 CDN 似乎有 10G 免费额度，付费额度：100GB 20元/6个月。</p></blockquote><h4 id="4-2-1-添加域名">4.2.1 添加域名</h4><p>申请 CDN 时，有两个需要填写的：<strong>源站类型</strong> 和 <strong>域名</strong> 。</p><p>域名自然是需要加速的域名，而源站类型则有以下几种：<em>源站 IP</em> 、<em>源站域名</em> 、 <em>对象存储</em> 。</p><p><strong>对象存储</strong> 只能是腾讯云的，这里先不展开；<strong>源站域名</strong> 的话有一个前置要求：需要备案。</p><p>所以最方便的莫过于选择 <strong>源站 IP</strong> ，IP 的获取方法是用 <code>ping</code> 命令访问 Github 给你的域名后得到的。</p><p>当然，如果有自己的云主机，此处填写自己的主机 IP 也是可以的，本博客便是这样做的：好处是如果访问链接没有命中 CDN ，国内服务器的访问速度也比国外较快（回源时的时间消耗减少），同时 CDN 获取源站信息也有速度优势。</p><h4 id="4-2-2-缓存配置">4.2.2 缓存配置</h4><p>另外一个需要关注的就是：<strong>缓存配置</strong> （缓存过期配置）。</p><p>Hexo 生成的网页是全静态的，为了提高 CDN 命中率，可以把全站缓存的时间设置的相对久一些。</p><h3 id="4-3-Https-链接">4.3 Https 链接</h3><p>Github <strong>本身是支持</strong> 设置 Https 链接的，证书由 Github 自动颁发、续期。不过需要用户手动开启：<code>Enforce HTTPS</code></p><p><figure class='image-wrapper'><img fancybox src="https://img.inkss.cn/inkss/static/Hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA.assets/01.png" class="lazyload" data-srcset="https://img.inkss.cn/inkss/static/Hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA.assets/01.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="Github 开启 Https 链接">  <figcaption>Github 开启 Https 链接</figcaption></figure></p><p>此外，如果使用了和本博客类似的手段：DNS 根据 IP 指向不同域名的话，<strong>在访问者位于国内时，仍需要配置一个证书</strong>。原因是国内的 IP 被 DNS 指向了 CDN 域名了，没有指向 Github ，那么 Github 给的证书便是无效不起作用，这里有两种选择：</p><ul><li>没有云主机的可以通过 CDN 开启强制跳转 HTTPS （国外访问 Github 会帮助你自动跳转）。</li><li>有云主机的设置服务器的 HTTP 强制跳转 HTTPS ，也可以同时勾选 CDN 的强制跳转。</li></ul><blockquote><p>在腾讯云可以免费申请到一年的 SSL 证书，一般一至两天申请便可以批下来。云主机配置可以参看这篇文章：<a href="https://github.com/inkss/markdown/blob/master/Linux/%E6%9C%8D%E5%8A%A1%E5%99%A8/CentOS%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE.md">CentOS PHP 环境配置 [LAMP]</a></p></blockquote><h3 id="4-4-OSS-对象存储">4.4 OSS 对象存储</h3><p>如果以减少成本为目的的话，最好的选择不是云主机而是 <strong>对象存储</strong> 。关于免费额度：<strong><code>50GB 空间、10 GB 流量/CDN 回源、100 万次请求</code></strong>。</p><p>如果是只当图床使用，一般默认的配置即可；如果是当静态网页使用需要先手动开启这个功能，然后把域名 <strong>解析到对象存储分配给你的域名上</strong> 。此外对象存储也支持 CDN ，不过同样也需要手动开启。最后的最后还需要将 Hexo 网页的部署对象换成腾讯云的 OSS （有相关插件）。</p><blockquote><p>备注：记得给对象存储或者 CDN 开启防盗链。⚓️</p></blockquote><h2 id="5-Hexo-部署">5.Hexo 部署</h2><blockquote><p>这部分单独拿出来说，因为现在一直在做一个假设：当服务器 <strong>宕机/停止续费</strong> 后如何保证网站的正常访问。</p><p>此外还有一个需求就是：降低网站总开销（最大的开支应该会出自服务器上）。</p></blockquote><h3 id="5-1-域名解析-DNS">5.1 域名解析 DNS</h3><p>先谈谈防止宕机，前面域名部分提到了现在对域名是直接解析，依靠 IP 地址指向不同的域名。</p><p>国外流量指向 Github Page ，这部分不用担心；而国内流量则被指向到腾讯云的 CDN，所以需要修改这里。</p><blockquote><p>此处开支：.cn 域名 35 元/年、DNS 解析套餐免费。</p></blockquote><h3 id="5-2-CDN-热备">5.2 CDN 热备</h3><p>CDN 的自有源支持热备，<ins>也就是主源宕机，热备源回源</ins>。那么重点也就是这儿了：设置热备源：<code>xxxx.github.io</code> 。</p><blockquote><p>此处开支：免费 10GB 0元/月、付费 100GB 20元/6月。</p></blockquote><h3 id="5-3-对象存储">5.3 对象存储</h3><p>主机宕机的问题解决了，但是如果主机停止续费呢，CDN 从 Github 回源又降低了速度，所以就考虑了 OSS 。</p><p>此部分的大标题叫做：Hexo 部署，既然是部署自然也就想到部署到对象存储里。需要插件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-cos-enhanced --save</span><br></pre></td></tr></table></figure><p>使用方法见：<a href="https://github.com/75k/hexo-deployer-cos-enhanced/blob/master/README.md">hexo-deployer-cos-enhanced</a> 。相关额度如下：</p><table><thead><tr><th>资源类型</th><th>资源子类型</th><th>每月免费额度</th></tr></thead><tbody><tr><td>存储空间</td><td>存储空间</td><td>50 GB</td></tr><tr><td>流量</td><td>外网下行流量</td><td>10 GB</td></tr><tr><td>流量</td><td>腾讯云 CDN 回源流量</td><td>10 GB</td></tr><tr><td>请求</td><td>读请求</td><td>100 万次</td></tr><tr><td>请求</td><td>写请求</td><td>100 万次</td></tr></tbody></table><hr><p><a href="#top">回到顶部</a> © Inkss</p>]]></content>
    
    
    <summary type="html">本文偏向于记录备份，非新手向教程，仅供参考。先说搭建这个博客的原因：在搭建博客之前我的所有的文章都是存储在 Github 仓库中，直到某天在投简历的时候发现有的要求填写博客链接 ，掐指一算在玩腻饥荒后似乎还闲置着一个腾讯云的学生主机，索性自己折腾一个博客出来。</summary>
    
    
    
    <category term="博客" scheme="https://inkss.cn/categories/%E5%8D%9A%E5%AE%A2/"/>
    
    
    <category term="网站" scheme="https://inkss.cn/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="Hexo" scheme="https://inkss.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Linux Shell 设置 Proxy</title>
    <link href="https://inkss.cn/blog/f44c3b52/"/>
    <id>https://inkss.cn/blog/f44c3b52/</id>
    <published>2018-09-10T21:26:00.000Z</published>
    <updated>2020-08-09T11:12:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、Git-Proxy">一、Git Proxy</h2><p>如果不需要终端下全局代理，仅仅只是代理 Git 相关的命令，则有一个简单的方案：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy <span class="string">&#x27;socks5://127.0.0.1:1080&#x27;</span></span><br><span class="line">git config --global https.proxy <span class="string">&#x27;socks5://127.0.0.1:1080&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="二、Terminal-Proxy">二、Terminal Proxy</h2><p>需要修改终端（Shell）的环境变量，修改（相应的）文件并追加以下内容：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=socks5://127.0.0.1:1080</span><br><span class="line"><span class="built_in">export</span> https_proxy=socks5://127.0.0.1:1080</span><br><span class="line"><span class="comment"># 注意：wget 不支持的协议类型 “socks5”</span></span><br><span class="line"><span class="comment"># bashrc or zshrc</span></span><br></pre></td></tr></table></figure><p>然后接下来只需要使其生效即可：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bashrc <span class="comment"># 或者 .zshrc</span></span><br></pre></td></tr></table></figure><p>可以使用 curl 命令进行测试：<code>curl ip.cn</code></p><h2 id="三、Other">三、Other</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;xxxx&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;xxxx@xxx.com&quot;</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;xxxx@xxx.com&quot;</span></span><br><span class="line">ssh git@github.com</span><br></pre></td></tr></table></figure><hr><p>参考资料：</p><ul><li><a href="https://blog.fazero.me/2015/07/11/%E7%94%A8shadowsocks%E5%8A%A0%E9%80%9Fgit-clone/">终端加速 git clone</a></li><li><a href="https://aiezu.com/article/linux_bash_set_proxy.html">Linux bash终端设置代理（proxy）访问</a></li></ul>]]></content>
    
    
    <summary type="html">Linux Shell 设置 Proxy。</summary>
    
    
    
    <category term="教程" scheme="https://inkss.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Shell" scheme="https://inkss.cn/tags/Shell/"/>
    
    <category term="Proxy" scheme="https://inkss.cn/tags/Proxy/"/>
    
  </entry>
  
  <entry>
    <title>Git 管理私钥</title>
    <link href="https://inkss.cn/blog/d71b1012/"/>
    <id>https://inkss.cn/blog/d71b1012/</id>
    <published>2018-09-08T13:48:00.000Z</published>
    <updated>2020-04-16T16:03:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="一、添加私钥">一、添加私钥</h2><p>1.Linux 平台：打开终端到 id_rsa 文件所在目录</p><p>2.Windows 平台：id_rsa 文件所在目录右键打开 Git Bash Here</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 终端执行</span></span><br><span class="line">ssh-add id_rsa</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果提示：Could not open a connection to your authentication agent</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 执行下列语句</span></span><br><span class="line">ssh-agent bash</span><br></pre></td></tr></table></figure><h2 id="二、新建-config-文件">二、新建 <code>config</code> 文件</h2><p>文件内容如下：</p><p>需要注意的是：<code>IdentityFile</code> 指向 id_rsa 文件,不一定非要放在 .ssh 目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> github</span></span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile /home/yourname/Documents/ssh/id_rsa</span><br><span class="line">User yourname</span><br></pre></td></tr></table></figure><p>复制该文件到 ssh 目录：</p><p>1.Linux 平台：<code>/home/yourname/.ssh/</code></p><p>2.Windows 平台：<code>/c/Users/yourname/.ssh/</code></p><h2 id="三、测试链接">三、测试链接</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置 name 与 email</span></span><br><span class="line">git config --global user.name &quot;name&quot;</span><br><span class="line">git config --global user.email &quot;email&quot;</span><br></pre></td></tr></table></figure><h2 id="附录">附录</h2><p>对于 Linux 系统，如果是直接复制 config 和 id_rsa 文件多半会收到下列提示：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Bad owner or permissions on ...</span><br><span class="line">permissions are too open error</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">很明显，是权限的问题使得私钥未被接收，所以修改这两个文件的权限即可：</span><br><span class="line"></span><br><span class="line">```sh</span><br><span class="line">chmod 400 ~/.ssh/config</span><br><span class="line">chmod 400 ~/.ssh/id_rsa</span><br></pre></td></tr></table></figure><hr><p><a href="#top">回到顶部</a> © Inkss</p>]]></content>
    
    
    <summary type="html">保留私钥到各个平台，替换使用。</summary>
    
    
    
    <category term="资料" scheme="https://inkss.cn/categories/%E8%B5%84%E6%96%99/"/>
    
    
    <category term="Git" scheme="https://inkss.cn/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Jrebel 反代激活</title>
    <link href="https://inkss.cn/blog/89be439/"/>
    <id>https://inkss.cn/blog/89be439/</id>
    <published>2018-09-08T13:48:00.000Z</published>
    <updated>2020-04-16T16:03:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>JRebel 的社区激活取消了，不能用分享到脸书的方式激活插件了，有点桑心。搜索了一番本地激活方法，于此记录。</p><h2 id="1-准备工具">1 准备工具</h2><ul><li><p>在 <a href="https://github.com/ilanyu/ReverseProxy">ilanyu/ReverseProxy</a> 下载工具，相应操作系统选择自己对应的版本。</p></li><li><p>在 <a href="https://www.guidgenerator.com/online-guid-generator.aspx">Online GUID Generator</a> 获取一串 GUID，记录之。</p></li><li><p>IDEA 上在线下载 JRebel 插件。</p></li></ul><h2 id="2-激活">2 激活</h2><ul><li><p>运行步奏一下载的程序（如果端口冲突参考 GitHub 文档使用帮助）。</p></li><li><p>修改本机 Hosts 文件，对于 Windows 目录为：<code>C:\Windows\System32\drivers\etc</code></p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 任意添加一个网站代理到本地回环上</span></span><br><span class="line">127.0.0.1 omg.cc</span><br></pre></td></tr></table></figure><ul><li>IDEA 中打开 JRebel 的激活界面。URL 处填写 <code>http://omg.cc:8888/你找的GUID</code></li></ul><h2 id="3-以上">3 以上</h2><p>哦，记得将激活类型改为 work offline，离线 180 天，不然每次开还是有些麻烦的。</p><hr><p>参考资料：</p><ol><li><p><a href="https://github.com/ilanyu/ReverseProxy">https://github.com/ilanyu/ReverseProxy</a></p></li><li><p><a href="https://www.guidgenerator.com/online-guid-generator.aspx">https://www.guidgenerator.com/online-guid-generator.aspx</a></p></li></ol>]]></content>
    
    
    <summary type="html">JRebel 的社区激活取消了，搜索了一番本地激活方法，于此记录。</summary>
    
    
    
    <category term="资料" scheme="https://inkss.cn/categories/%E8%B5%84%E6%96%99/"/>
    
    
    <category term="Java" scheme="https://inkss.cn/tags/Java/"/>
    
    <category term="破解" scheme="https://inkss.cn/tags/%E7%A0%B4%E8%A7%A3/"/>
    
  </entry>
  
</feed>