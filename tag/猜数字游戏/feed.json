{
    "version": "https://jsonfeed.org/version/1",
    "title": "qinxs小站 • All posts by \"猜数字游戏\" tag",
    "description": "基于Volantis主题搭建的Hexo博客，用于记录工作中的技术总结、博客主题信息以及其他个人爱好",
    "home_page_url": "https://7bxing.com",
    "items": [
        {
            "id": "https://7bxing.com/posts/3713cf69/",
            "url": "https://7bxing.com/posts/3713cf69/",
            "title": "Shell猜数字游戏",
            "date_published": "2020-06-06T13:12:21.000Z",
            "content_html": "<p>猜数字游戏加强版, 熟悉shell的基础语法，shell注意事项</p>\n<a id=\"more\"></a>\n\n<h3 id=\"猜数字规则\"><a href=\"#猜数字规则\" class=\"headerlink\" title=\"猜数字规则\"></a>猜数字规则</h3><ul>\n<li>随机生成一个0~99的数字</li>\n<li>输入错误 直接返回重新输入</li>\n<li>猜测错误 提示大小 继续猜测（并返回剩余猜测次数）</li>\n<li>连续猜错5次  退出（提示GAME OVER）</li>\n<li>猜测正确（返回 you got it!）</li>\n</ul>\n<h3 id=\"Shell备忘\"><a href=\"#Shell备忘\" class=\"headerlink\" title=\"Shell备忘\"></a>Shell备忘</h3><h4 id=\"1-文件模式\"><a href=\"#1-文件模式\" class=\"headerlink\" title=\"1. 文件模式\"></a>1. 文件模式</h4><p>windows下的换行（\\r\\n）与linux（\\n）下不同，如果是windows下创建的shell文件，传到linux后，需要在vim下重设格式为linux模式（重新编辑不需要改）</p>\n<ul>\n<li><code>set ff</code> 查看文件模式</li>\n<li><code>set ff=unix</code> 设置文件为unix模式<blockquote>\n<p>注：mac系统换行为（\\r）</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"2-立即执行\"><a href=\"#2-立即执行\" class=\"headerlink\" title=\"2. 立即执行\"></a>2. 立即执行</h4><ul>\n<li>$()</li>\n<li>``<blockquote>\n<p>推荐最外层用反引号``，内层用$(), 如：<br>rn=`echo $(head -20 /dev/urandom | cksum | cut -f1 -d “ “) % 100 | bc`</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"3-各种判断\"><a href=\"#3-各种判断\" class=\"headerlink\" title=\"3. 各种判断\"></a>3. 各种判断</h4><p>推荐用法:</p>\n<ul>\n<li><code>[]</code>   用于判断文件（目录）或者变量的存在与否,如 [ -z “a.sh” ] </li>\n<li><code>[[]]</code> 用于正则判断，如 [[ “$INT” =~ ^-?[0-9]+$ ]]</li>\n<li><code>(())</code> 用于整数比较和计算,如 (( $gn &gt; $rn )) 、$((chance-count))</li>\n<li>！表示否定，如 [ ！ -z “a.sh” ]</li>\n<li>测试： ((1&gt;2)) &amp;&amp; echo 111 || echo 222<blockquote>\n<p>注：<code>[]</code>和<code>[[]]</code>两边必须有空格</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"4-函数的返回值\"><a href=\"#4-函数的返回值\" class=\"headerlink\" title=\"4. 函数的返回值\"></a>4. <a href=\"https://www.runoob.com/linux/linux-shell-func.html\">函数</a>的返回值</h4><ul>\n<li>可以显示加：return 返回</li>\n<li>如果不加，将以最后一条命令运行结果，作为返回值</li>\n<li>return后跟数值n(0-255)<blockquote>\n<p>如需要其他返回值： 可以通过echo返回字符串，或者操作全局变量</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"猜数字代码\"><a href=\"#猜数字代码\" class=\"headerlink\" title=\"猜数字代码\"></a>猜数字代码</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"comment\"># Shell猜数字游戏</span></span><br><span class=\"line\"><span class=\"comment\"># 规则</span></span><br><span class=\"line\"><span class=\"comment\"># 1 随机生成一个0~99的数字</span></span><br><span class=\"line\"><span class=\"comment\"># 2 输入错误 直接返回重新输入</span></span><br><span class=\"line\"><span class=\"comment\"># 3 猜测错误 提示大小 继续猜测（并返回剩余猜测次数）</span></span><br><span class=\"line\"><span class=\"comment\"># 4 连续猜错5次  退出（提示GAME OVER）</span></span><br><span class=\"line\"><span class=\"comment\"># 5 猜测正确（返回 you got it!）</span></span><br><span class=\"line\"></span><br><span class=\"line\">count=0</span><br><span class=\"line\">chance=5</span><br><span class=\"line\"></span><br><span class=\"line\">cat &lt;&lt; EOF</span><br><span class=\"line\">======= Shell猜数字游戏 =======</span><br><span class=\"line\"><span class=\"comment\"># 数字区间[0~99]</span></span><br><span class=\"line\"><span class=\"comment\"># 你共有$&#123;chance&#125;次机会！</span></span><br><span class=\"line\"><span class=\"comment\"># Ctrl+C可强制退出</span></span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">rn=`<span class=\"built_in\">echo</span> $(head -20 /dev/urandom | cksum | cut -f1 -d <span class=\"string\">&quot; &quot;</span>) % 100 | bc`</span><br><span class=\"line\"><span class=\"comment\"># echo $rn</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">echoColor</span></span>()&#123;</span><br><span class=\"line\">  <span class=\"built_in\">declare</span> -A colors</span><br><span class=\"line\">  colors=(</span><br><span class=\"line\">    [black]=30    <span class=\"comment\"># 30m 黑色字</span></span><br><span class=\"line\">    [red]=31      <span class=\"comment\"># 31m 红色字</span></span><br><span class=\"line\">    [green]=32    <span class=\"comment\"># 32m 绿色字</span></span><br><span class=\"line\">    [yellow]=33   <span class=\"comment\"># 33m 黄色字</span></span><br><span class=\"line\">    [blue]=34     <span class=\"comment\"># 34m 蓝色字</span></span><br><span class=\"line\">    [purple]=35   <span class=\"comment\"># 35m 紫色字</span></span><br><span class=\"line\">    [skyblue]=36  <span class=\"comment\"># 36m 天蓝字</span></span><br><span class=\"line\">    [white]=37    <span class=\"comment\"># 37m 白色字</span></span><br><span class=\"line\">  )</span><br><span class=\"line\">  mes=<span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># 示例 echo -e &quot;\\033[31m 颜色字 \\033[0m&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> -e <span class=\"string\">&quot;\\033[<span class=\"variable\">$&#123;colors[$2]&#125;</span>m<span class=\"variable\">$&#123;mes&#125;</span>\\033[0m&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">chkValue</span></span>()&#123;</span><br><span class=\"line\">  gn=<span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span></span><br><span class=\"line\">  <span class=\"comment\"># 非空判断</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ -z <span class=\"string\">&quot;<span class=\"variable\">$gn</span>&quot;</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    echoColor <span class=\"string\">&quot;你还未输入呢&quot;</span> <span class=\"string\">&quot;skyblue&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">continue</span></span><br><span class=\"line\">  <span class=\"comment\"># 有效数字判断</span></span><br><span class=\"line\">  <span class=\"keyword\">elif</span> <span class=\"built_in\">echo</span> <span class=\"string\">&quot;<span class=\"variable\">$gn</span>&quot;</span> | grep -q <span class=\"string\">&#x27;[^0-9]&#x27;</span>; <span class=\"keyword\">then</span></span><br><span class=\"line\">    echoColor <span class=\"string\">&quot;请输入有效的数字&quot;</span> <span class=\"string\">&quot;red&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">continue</span></span><br><span class=\"line\">  <span class=\"comment\"># 范围判断</span></span><br><span class=\"line\">  <span class=\"keyword\">elif</span> (( <span class=\"variable\">$gn</span> &lt; 0 )) || (( <span class=\"variable\">$gn</span> &gt; 99 )); <span class=\"keyword\">then</span></span><br><span class=\"line\">    echoColor <span class=\"string\">&quot;输入大小有误,请重新输入!&quot;</span> <span class=\"string\">&quot;red&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">continue</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">chkCount</span></span>()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (( <span class=\"variable\">$1</span> &gt;= <span class=\"variable\">$chance</span> )); <span class=\"keyword\">then</span></span><br><span class=\"line\">    echoColor <span class=\"string\">&quot;<span class=\"variable\">$&#123;chance&#125;</span>次机会已用完, GAME OVER!&quot;</span> <span class=\"string\">&quot;blue&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 0</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">guess</span></span>()&#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> <span class=\"literal\">true</span>; <span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">read</span> -p <span class=\"string\">&quot;请输入你猜测的数字[0~99]：&quot;</span> gn</span><br><span class=\"line\">    chkValue <span class=\"string\">&quot;<span class=\"variable\">$gn</span>&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (( <span class=\"variable\">$gn</span> &gt; <span class=\"variable\">$rn</span> )); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">let</span> <span class=\"string\">&quot;count++&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;猜大了&#x27;</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;剩余猜测次数：<span class=\"subst\">$((chance-count)</span>)&quot;</span></span><br><span class=\"line\">    chkCount <span class=\"variable\">$count</span></span><br><span class=\"line\">    guess</span><br><span class=\"line\">  <span class=\"keyword\">elif</span> (( <span class=\"variable\">$gn</span> &lt; <span class=\"variable\">$rn</span> )); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">let</span> <span class=\"string\">&quot;count++&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&#x27;猜小了&#x27;</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;剩余猜测次数：<span class=\"subst\">$((chance-count)</span>)&quot;</span></span><br><span class=\"line\">    chkCount <span class=\"variable\">$count</span></span><br><span class=\"line\">    guess</span><br><span class=\"line\">  <span class=\"keyword\">else</span></span><br><span class=\"line\">    echoColor <span class=\"string\">&quot;you got it!!!&quot;</span> <span class=\"string\">&quot;green&quot;</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">guess</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n",
            "tags": [
                "Shell",
                "猜数字游戏"
            ]
        }
    ]
}