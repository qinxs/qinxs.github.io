var SearchService="",GoogleCustomSearch=(!function(o){SearchService=function(e){var r=this;r.config=o.extend({per_page:10,selectors:{body:"body",form:".u-search-form",input:".u-search-input",container:"#u-search",modal:"#u-search .modal",modal_body:"#u-search .modal-body",modal_footer:"#u-search .modal-footer",modal_overlay:"#u-search .modal-overlay",modal_results:"#u-search .modal-results",modal_metadata:"#u-search .modal-metadata",modal_error:"#u-search .modal-error",modal_loading_bar:"#u-search .modal-loading-bar",modal_ajax_content:"#u-search .modal-ajax-content",modal_logo:"#u-search .modal-footer .logo",btn_close:"#u-search .btn-close",btn_next:"#u-search .btn-next",btn_prev:"#u-search .btn-prev"},brands:{hexo:{logo:"",url:""},google:{logo:"google.svg",url:"https://cse.google.com"},algolia:{logo:"algolia.svg",url:"https://www.algolia.com"},baidu:{logo:"baidu.svg",url:"http://zn.baidu.com/cse/home/index"},azure:{logo:"azure.svg",url:"https://azure.microsoft.com/en-us/services/search/"}},imagePath:"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@master/img/logo/"},e),r.dom={},r.percentLoaded=0,r.open=!1,r.queryText="",r.nav={next:-1,prev:-1,total:0,current:1},r.parseSelectors=function(){for(var e in r.config.selectors)r.dom[e]=o(r.config.selectors[e])},r.beforeQuery=function(){r.open||r.dom.container.fadeIn(),r.dom.input.each(function(e,a){o(a).val(r.queryText)}),document.activeElement.blur(),r.dom.modal_error.hide(),r.dom.modal_ajax_content.removeClass("loaded"),r.startLoading()},r.afterQuery=function(){r.dom.modal_body.scrollTop(0),r.dom.modal_ajax_content.addClass("loaded"),r.stopLoading()},r.search=function(e,a){r.beforeQuery(),r.search instanceof Function?r.query(r.queryText,e,function(){r.afterQuery()}):(console.log("query() does not exist."),r.onQueryError(r.queryText,""),r.afterQuery())},r.onQueryError=function(e,a){var o="",o="success"===a?'No result found for "'+e+'".':"timeout"===a?"Unfortunate timeout.":"Mysterious failure.";r.dom.modal_results.html(""),r.dom.modal_error.html(o),r.dom.modal_error.show()},r.nextPage=function(){-1!==r.nav.next&&r.search(r.nav.next)},r.prevPage=function(){-1!==r.nav.prev&&r.search(r.nav.prev)},r.getUrlRelativePath=function(e){var e=e.split("//"),a=e[1].indexOf("/"),e=e[1].substring(a);return e=-1!=e.indexOf("?")?e.split("?")[0]:e},r.buildResult=function(e,a,o){var t="";return t=(t="<li>")+("<a class='result' href='"+r.getUrlRelativePath(e)+"'>")+("<span class='title'>"+a+"</span>"),""!==o&&(t+="<span class='digest'>"+o+"</span>"),t=t+"</a>"+"</li>"},r.close=function(){r.open=!1,r.dom.container.fadeOut(),r.dom.body.removeClass("modal-active")},r.onSubmit=function(e){e.preventDefault(),r.queryText=o(this).find(".u-search-input").val(),r.queryText&&r.search(1)},r.startLoading=function(){r.dom.modal_loading_bar.show(),r.loadingTimer=setInterval(function(){r.percentLoaded=Math.min(r.percentLoaded+5,95),r.dom.modal_loading_bar.css("width",r.percentLoaded+"%")},100)},r.stopLoading=function(){clearInterval(r.loadingTimer),r.dom.modal_loading_bar.css("width","100%"),r.dom.modal_loading_bar.fadeOut(),setTimeout(function(){r.percentLoaded=0,r.dom.modal_loading_bar.css("width","0%")},300)},r.addLogo=function(e){var a="";r.config.brands[e]&&r.config.brands[e].logo&&(a=(a+="<a href='"+r.config.brands[e].url+"' class='"+e+"'>")+'<img src="'+r.config.imagePath+r.config.brands[e].logo+'" />',r.dom.modal_logo.html(a+="</a>"))},r.destroy=function(){r.dom.form.each(function(e,a){o(a).off("submit")}),r.dom.modal_overlay.off("click"),r.dom.btn_close.off("click"),r.dom.btn_next.off("click"),r.dom.btn_prev.off("click"),r.dom.container.remove()},r.init=function(){o("body").append(a),r.parseSelectors(),r.dom.modal_footer.show(),r.dom.form.each(function(e,a){o(a).on("submit",r.onSubmit)}),r.dom.modal_overlay.on("click",r.close),r.dom.btn_close.on("click",r.close),r.dom.btn_next.on("click",r.nextPage),r.dom.btn_prev.on("click",r.prevPage)},r.init()};var a='<div id="u-search"><div class="modal"> <header class="modal-header" class="clearfix"><form id="u-search-modal-form" class="u-search-form" name="uSearchModalForm"> <input type="text" id="u-search-modal-input" class="u-search-input" /> <button type="submit" id="u-search-modal-btn-submit" class="u-search-btn-submit"> <span class="fas fa-search"></span> </button></form> <a class="btn-close"> <span class="fas fa-times"></span> </a><div class="modal-loading"><div class="modal-loading-bar"></div></div> </header> <main class="modal-body"><ul class="modal-results modal-ajax-content"></ul> </main> <footer class="modal-footer clearfix"><div class="modal-metadata modal-ajax-content"> <strong class="range"></strong> of <strong class="total"></strong></div><div class="modal-error"></div> <div class="logo"></div> <a class="nav btn-next modal-ajax-content"> <span class="text">NEXT</span> <span class="fal fa-chevron-right"></span> </a> <a class="nav btn-prev modal-ajax-content"> <span class="fal fa-chevron-left"></span> <span class="text">PREV</span> </a> </footer></div><div class="modal-overlay"></div></div>'}(jQuery),"");!function(a){"use strict";GoogleCustomSearch=function(e){SearchService.apply(this,arguments);var n=this;return n.addLogo("google"),n.buildResultList=function(e){var r="";return a.each(e,function(e,a){var o=a.link,t=a.title,a=(a.htmlSnippet||"").replace("<br>","");r+=n.buildResult(o,t,a)}),r+="<script>try{pjax.refresh(document.querySelector('#u-search'));document.addEventListener('pjax:send',function(){$('#u-search').fadeOut(500);$('body').removeClass('modal-active')});}catch(e){$('#u-search').fadeOut(500);}<\/script>"},n.buildMetadata=function(e){e.queries&&e.queries.request&&"0"!==e.queries.request[0].totalResults?(n.nav.current=e.queries.request[0].startIndex,n.nav.currentCount=e.queries.request[0].count,n.nav.total=parseInt(e.queries.request[0].totalResults),n.dom.modal_metadata.children(".total").html(n.nav.total),n.dom.modal_metadata.children(".range").html(n.nav.current+"-"+(n.nav.current+n.nav.currentCount-1)),n.dom.modal_metadata.show()):n.dom.modal_metadata.hide(),e.queries&&e.queries.nextPage?(n.nav.next=e.queries.nextPage[0].startIndex,n.dom.btn_next.show()):(n.nav.next=-1,n.dom.btn_next.hide()),e.queries&&e.queries.previousPage?(n.nav.prev=e.queries.previousPage[0].startIndex,n.dom.btn_prev.show()):(n.nav.prev=-1,n.dom.btn_prev.hide())},n.query=function(t,e,r){a.get("https://www.googleapis.com/customsearch/v1",{key:n.config.apiKey,cx:n.config.engineId,q:t,start:e,num:n.config.per_page},function(e,a){var o;"success"===a&&e.items&&0<e.items.length?(o=n.buildResultList(e.items),n.dom.modal_results.html(o)):n.onQueryError(t,a),n.buildMetadata(e),r&&r()})},n}}(jQuery);